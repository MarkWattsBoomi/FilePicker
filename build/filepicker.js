(()=>{var e={341:()=>{},877:()=>{},580:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((i=i.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DragEvent=t.eDragEventType=t.modalDialogButton=t.DialogBox=void 0;var u=s(n(804));n(341);var d=function(e){function t(t){var n=e.call(this,t)||this;return n.dragEvent=new h,n.dialogVisible=!1,n.dialogTitle="",n.dialogButtons=[],n.dialogOnClose=n.hideDialog,n.top=0,n.left=0,n.handleKeyUp=n.handleKeyUp.bind(n),n.handleOutsideClick=n.handleOutsideClick.bind(n),n.showDialog=n.showDialog.bind(n),n.hideDialog=n.hideDialog.bind(n),n}return o(t,e),t.prototype.setDialog=function(e){if(this.dialog=e,this.dialog){var t=this.dialog.offsetParent.clientWidth/2,n=this.dialog.offsetParent.clientHeight/2,i=this.dialog.clientWidth/2,o=this.dialog.clientHeight/2;this.left=t-i,this.top=n-o,this.dialog.classList.add("shown"),this.positionDialog()}},t.prototype.positionDialog=function(){this.dialog&&(this.dialog.style.left=this.left+"px",this.dialog.style.top=this.top+"px")},t.prototype.stopEventBubble=function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1},t.prototype.componentDidMount=function(){this.forceUpdate()},t.prototype.showDialog=function(e,t,n,i){return l(this,void 0,void 0,(function(){return c(this,(function(o){return this.dialogVisible=!0,this.dialogTitle=e,this.dialogContent=t,this.dialogOnClose=i||this.hideDialog,this.dialogButtons=n,this.forceUpdate(),[2]}))}))},t.prototype.hideDialog=function(e){return l(this,void 0,void 0,(function(){return c(this,(function(e){return this.dialogVisible=!1,this.dialogTitle="",this.dialogContent=void 0,this.dialogOnClose=void 0,this.dialogButtons=[],this.forceUpdate(),[2]}))}))},t.prototype.handleKeyUp=function(e){var t=this,n={27:function(){e.preventDefault(),t.hideDialog()}};n[e.keyCode]&&n[e.keyCode]()},t.prototype.handleOutsideClick=function(e){this.dialog||this.dialog.contains(e.target)||this.hideDialog()},t.prototype.render=function(){var e,t=this;if(!1===this.dialogVisible)e=u.createElement("div",null);else{for(var n=[],i=function(e){n.push(u.createElement("button",{className:"modal-dialog-button-bar-button",title:"Cancel",onMouseDown:function(t){t.stopPropagation(),e.handler()}},e.label))},o=0,a=this.dialogButtons;o<a.length;o++)i(a[o]);e=u.createElement("div",{className:"modal-redaction",onMouseMove:function(e){t.onMouseMove(e)},onMouseUp:function(e){t.onMouseUp(e)},onMouseDown:function(e){t.handleOutsideClick(e)},onContextMenu:function(e){e.preventDefault(),e.stopPropagation(),t.props.onContextMenu&&t.props.onContextMenu()}},u.createElement("div",{className:"modal-content",ref:function(e){t.setDialog(e)}},u.createElement("div",{className:"modal-dialog"},u.createElement("div",{className:"modal-dialog-header",onMouseDown:function(e){t.onMouseDown(e)}},u.createElement("div",{style:{display:"flex",flexDirection:"row",flexGrow:1}},u.createElement("span",{className:"modal-dialog-header-title"},this.dialogTitle)),u.createElement("div",{style:{display:"flex",flexDirection:"row",marginLeft:"auto",flexGrow:0}},u.createElement("span",{className:"glyphicon glyphicon-remove modal-dialog-header-button",title:"Close",onMouseDown:function(e){e.stopPropagation(),t.dialogOnClose()}}))),u.createElement("div",{className:"modal-dialog-body"},u.createElement("div",{className:"modal-dialog-body-client"},this.dialogContent)),u.createElement("div",{className:"modal-dialog-button-bar"},n))))}return e},t.prototype.moveMe=function(e,t){this.left=e,this.top=t,this.positionDialog()},t.prototype.onMouseDown=function(e){var t=e.target.getBoundingClientRect(),n=e.clientY-t.top;this.dragEvent=h.start(p.dialog,this,e.clientX-t.left,n)},t.prototype.onMouseMove=function(e){this.dragEvent.type===p.dialog&&this.moveMe(e.clientX-this.dragEvent.mouseOffsetX,e.clientY-this.dragEvent.mouseOffsetY)},t.prototype.onMouseUp=function(e){this.dragEvent.type===p.dialog&&this.dragEvent.end(null,e.clientX,e.clientY)},t}(u.Component);t.DialogBox=d;var p;t.modalDialogButton=function(e,t){this.label=e,this.handler=t},function(e){e[e.unknown=0]="unknown",e[e.canvas=1]="canvas",e[e.table=2]="table",e[e.link=3]="link",e[e.dialog=4]="dialog"}(p=t.eDragEventType||(t.eDragEventType={}));var h=function(){function e(){this.type=p.unknown,this.sourceElement=null,this.targetElement=null,this.mouseX=0,this.mouseY=0,this.mouseOffsetX=0,this.mouseOffsetY=0}return e.start=function(t,n,i,o){var a=new e;return a.type=t,a.sourceElement=n,a.targetElement=null,a.mouseX=i,a.mouseY=o,a.mouseOffsetX=i,a.mouseOffsetY=o,a},e.prototype.drag=function(e,t){this.mouseX=e,this.mouseY=t},e.prototype.end=function(e,t,n){this.targetElement=e,this.mouseX=t,this.mouseY=n,this.type=p.unknown},e}();t.DragEvent=h},351:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),manywho.eventManager||(manywho.eventManager={},manywho.eventManager.beforeSendListeners={},manywho.eventManager.doneListeners={},manywho.eventManager.initializedListeners={},manywho.eventManager.joinListeners={},manywho.eventManager.failListeners={},manywho.eventManager.outcomeBeingTriggered,manywho.eventManager.history=[],manywho.eventManager.beforeSend=function(e,t){for(var n in e&&window.hasOwnProperty("culture")&&culture.length>0&&e.setRequestHeader("Culture",culture),manywho.eventManager.beforeSendListeners)manywho.eventManager.beforeSendListeners[n](e,t)},manywho.eventManager.join=function(e,t){for(var n in manywho.eventManager.joinListeners)manywho.eventManager.joinListeners[n](e,t)},manywho.eventManager.done=function(e,t){for(var n in manywho.eventManager.doneListeners)manywho.eventManager.doneListeners[n](e,t)},manywho.eventManager.initialized=function(e,t){for(var n in manywho.eventManager.initializedListeners)manywho.eventManager.initializedListeners[n](e,t)},manywho.eventManager.fail=function(e,t){for(var n in manywho.eventManager.failListeners)manywho.eventManager.failListeners[n](e,t)},manywho.eventManager.addBeforeSendListener=function(e,t){manywho.eventManager.beforeSendListeners[t]=e},manywho.eventManager.removeBeforeSendListener=function(e){delete manywho.eventManager.beforeSendListeners[e]},manywho.eventManager.addInitializedListener=function(e,t){manywho.eventManager.initializedListeners[t]=e},manywho.eventManager.removeInitializedListener=function(e){delete manywho.eventManager.initializedListeners[e]},manywho.eventManager.addJoinListener=function(e,t){manywho.eventManager.joinListeners[t]=e},manywho.eventManager.removeJoinListener=function(e){delete manywho.eventManager.joinListeners[e]},manywho.eventManager.addDoneListener=function(e,t){manywho.eventManager.doneListeners[t]=e},manywho.eventManager.removeDoneListener=function(e){delete manywho.eventManager.doneListeners[e]},manywho.eventManager.addFailListener=function(e,t){manywho.eventManager.failListeners[t]=e},manywho.eventManager.removeFailListener=function(e){delete manywho.eventManager.failListeners[e]},manywho.settings.initialize(null,{invoke:{beforeSend:manywho.eventManager.beforeSend,done:manywho.eventManager.done,fail:manywho.eventManager.fail},initialization:{beforeSend:manywho.eventManager.beforeSend,done:manywho.eventManager.initialized,fail:manywho.eventManager.fail},join:{beforeSend:manywho.eventManager.beforeSend,done:manywho.eventManager.join,fail:manywho.eventManager.fail}}))},687:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((i=i.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(804));n(877),n(351);var d=n(580),p=function(e){function t(t){var n,i,o,a=e.call(this,t)||this;a.selectedItem=null,a.text="",a.lastContent=u.createElement("div",null),a.fileSelected=a.fileSelected.bind(a),a.fileReadAsDataURL=a.fileReadAsDataURL.bind(a),a.ResizeBase64Img=a.ResizeBase64Img.bind(a),a.clearFile=a.clearFile.bind(a),a.pickFile=a.pickFile.bind(a),a.chooseFile=a.chooseFile.bind(a),a.isImage=a.isImage.bind(a),a.rescaleImage=a.rescaleImage.bind(a),a.flowMoved=a.flowMoved.bind(a),a.chooseFile=a.chooseFile.bind(a);var r=manywho.model.getComponent(a.props.id,a.props.flowKey);return a.mode=(null===(n=r.attributes)||void 0===n?void 0:n.mode)||"default",a.fileTypes=(null===(o=null===(i=r.attributes)||void 0===i?void 0:i.allowed)||void 0===o?void 0:o.split(","))||["*"],a.state={imgData:void 0,file:void 0},a}return o(t,e),t.prototype.flowMoved=function(e,t){return l(this,void 0,void 0,(function(){return c(this,(function(t){return"FORWARD"===e.invokeType||e.invokeType,[2]}))}))},t.prototype.componentDidMount=function(){return l(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.preserveState()];case 1:return e.sent(),[4,this.clearFile(!0)];case 2:return e.sent(),this.forceUpdate(),[2]}}))}))},t.prototype.preserveState=function(){return l(this,void 0,void 0,(function(){var e,t;return c(this,(function(n){return e=manywho.model.getComponent(this.props.id,this.props.flowKey),t={},"ContentString"===e.contentType?t.contentValue=e.contentValue:t.objectData=e.objectData,manywho.state.setComponent(this.props.id,t,this.props.flowKey,!0),[2]}))}))},t.prototype.componentWillUnmount=function(){},t.prototype.rescaleImage=function(e){this.img.width>=this.img.height?(this.img.style.width="100%",this.img.style.height="auto"):(this.img.style.width="auto",this.img.style.height="100%")},t.prototype.clearFile=function(e){var t,n,i,o,a,r;return void 0===e&&(e=!0),l(this,void 0,void 0,(function(){var s,l,u,d,p;return c(this,(function(c){switch(c.label){case 0:return console.log("clear file"),this.setState({imgData:void 0,file:void 0}),"ContentString"===(s=manywho.model.getComponent(this.props.id,this.props.flowKey)).contentType?manywho.state.setComponent(this.props.id,{contentValue:""},this.props.flowKey,!0):(l=manywho.state.getComponent(this.props.id,this.props.flowKey),u=void 0,(u=l.objectData&&l.objectData instanceof Array?l.objectData[0]:l.objectData)||(u=s.objectData&&s.objectData instanceof Array?s.objectData[0]:s.objectData),u&&(manywho.utils.setObjectDataProperty(u.properties,null===(t=s.attributes)||void 0===t?void 0:t.fileNameField,""),manywho.utils.setObjectDataProperty(u.properties,null===(n=s.attributes)||void 0===n?void 0:n.extensionField,""),manywho.utils.setObjectDataProperty(u.properties,null===(i=s.attributes)||void 0===i?void 0:i.mimeTypeField,""),manywho.utils.setObjectDataProperty(u.properties,null===(o=s.attributes)||void 0===o?void 0:o.sizeField,""),manywho.utils.setObjectDataProperty(u.properties,null===(a=s.attributes)||void 0===a?void 0:a.dataField,""),u.isSelected=!1),manywho.state.setComponent(this.props.id,{objectData:[u]},this.props.flowKey,!0)),(null===(r=s.attributes)||void 0===r?void 0:r.onCleared)&&s.attributes.onCleared.length>0?(d=manywho.model.getOutcomes(this.props.id,this.props.flowKey),(p=d.find((function(e){return e.developerName===s.attributes.onCleared})))?[4,manywho.component.onOutcome(p,null,this.props.flowKey)]:[3,2]):[3,4];case 1:return c.sent(),[3,3];case 2:!0===e&&manywho.component.handleEvent(this,s,this.props.flowKey),c.label=3;case 3:return[3,5];case 4:!0===e&&manywho.component.handleEvent(this,s,this.props.flowKey),c.label=5;case 5:return[2]}}))}))},t.prototype.pickFile=function(){this.fileInput.value="",this.fileInput.click()},t.prototype.isImage=function(e){switch(e){case"image/jpg":case"image/jpeg":case"image/bmp":case"image/gif":case"image/giff":case"image/png":case"image/webp":return!0;default:return!1}},t.prototype.chooseFile=function(e){var t;return l(this,void 0,void 0,(function(){var e,n,i,o,a,r;return c(this,(function(s){switch(s.label){case 0:e={types:[],excludeAcceptAllOption:!0,multiple:!1},n=manywho.model.getComponent(this.props.id,this.props.flowKey),((null===(t=n.attributes)||void 0===t?void 0:t.extensions)||"*").split(",").forEach((function(t){switch(t=t.trim().toLowerCase()){case"*":e.excludeAcceptAllOption=!1;break;case"csv":e.types.push({description:"CSV Files",accept:{"text/csv":[".csv"]}});break;case"xlsx":e.types.push({description:"Excel Files",accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsz"]}})}})),s.label=1;case 1:return s.trys.push([1,6,7,9]),[4,window.showOpenFilePicker(e)];case 2:return"file"!==(i=s.sent())[0].kind?[3,5]:[4,i[0].getFile()];case 3:return o=s.sent(),[4,this.fileReadAsDataURL(o)];case 4:a=s.sent(),this.setState({file:o,imageData:a}),s.label=5;case 5:return[3,9];case 6:return r=s.sent(),console.log(r),[3,9];case 7:return console.log("done"),[4,this.fileChosen()];case 8:return s.sent(),[7];case 9:return[2]}}))}))},t.prototype.fileChosen=function(){var e,t,n,i,o,a,r,s,p,h,f,m,v;return l(this,void 0,void 0,(function(){var l,y,g,b,w,D,j,M,O,x,C,E,k;return c(this,(function(c){switch(c.label){case 0:return(null===(t=null===(e=this.state.file)||void 0===e?void 0:e.name)||void 0===t?void 0:t.length)>0?(l=manywho.model.getComponent(this.props.id,this.props.flowKey),y=this.state.file.name.lastIndexOf(".")>=0?this.state.file.name.substring(0,this.state.file.name.lastIndexOf(".")):this.state.file.name,g=this.state.file.name.lastIndexOf(".")>=0?this.state.file.name.substring(this.state.file.name.lastIndexOf(".")+1).toLowerCase():"",b=this.state.file.type,w=this.state.file.size,D=this.state.imageData,(j=parseInt(l.attributes.maxSizeKB||0))>0&&w>1e3*j?(this.messageBox.showDialog("File Too Large",u.createElement("span",null,"The file you have chosen is ",w," bytes long and exceeds the maximum file size of ",j),[new d.modalDialogButton("Ok",this.messageBox.hideDialog)]),[3,8]):[3,1]):[3,8];case 1:return this.isImage(b)?(M=0,parseInt(l.attributes.imageSize||"0")>0&&(M=parseInt(l.attributes.imageSize)),M>0?[4,this.ResizeBase64Img(D,M)]:[3,3]):[3,3];case 2:D=c.sent(),c.label=3;case 3:return"ContentString"===l.contentType?manywho.state.setComponent(this.props.id,{contentValue:D},this.props.flowKey,!0):(O=manywho.state.getComponent(this.props.id,this.props.flowKey),x=void 0,(x=O.objectData&&O.objectData instanceof Array?O.objectData[0]:O.objectData)||(x=l.objectData&&l.objectData instanceof Array?l.objectData[0]:l.objectData),x&&(x.properties,(null===(n=l.attributes)||void 0===n?void 0:n.fileNameField)&&manywho.utils.setObjectDataProperty(x.properties,null===(i=l.attributes)||void 0===i?void 0:i.fileNameField,y),x.properties,(null===(o=l.attributes)||void 0===o?void 0:o.extensionField)&&manywho.utils.setObjectDataProperty(x.properties,null===(a=l.attributes)||void 0===a?void 0:a.extensionField,g),x.properties,(null===(r=l.attributes)||void 0===r?void 0:r.mimeTypeField)&&manywho.utils.setObjectDataProperty(x.properties,null===(s=l.attributes)||void 0===s?void 0:s.mimeTypeField,b),x.properties,(null===(p=l.attributes)||void 0===p?void 0:p.sizeField)&&manywho.utils.setObjectDataProperty(x.properties,null===(h=l.attributes)||void 0===h?void 0:h.sizeField,w),x.properties,(null===(f=l.attributes)||void 0===f?void 0:f.dataField)&&manywho.utils.setObjectDataProperty(x.properties,null===(m=l.attributes)||void 0===m?void 0:m.dataField,D)),manywho.state.setComponent(this.props.id,{objectData:[x]},this.props.flowKey,!0)),(null===(v=l.attributes)||void 0===v?void 0:v.onSelected)&&l.attributes.onSelected.length>0?(C=l.attributes.onSelected,E=manywho.model.getOutcomes(this.props.id,this.props.flowKey),(k=E.find((function(e){return e.developerName===C})))?[4,manywho.component.onOutcome(k,null,this.props.flowKey)]:[3,5]):[3,7];case 4:return c.sent(),[3,6];case 5:manywho.component.handleEvent(this,l,this.props.flowKey),c.label=6;case 6:return[3,8];case 7:manywho.component.handleEvent(this,l,this.props.flowKey),c.label=8;case 8:return[2]}}))}))},t.prototype.fileSelected=function(e){var t,n,i,o,a,r,s,p,h,f,m;return l(this,void 0,void 0,(function(){var e,l,v,y,g,b,w,D,j,M,O,x,C,E;return c(this,(function(c){switch(c.label){case 0:return this.fileInput.value.length>0?(e=manywho.model.getComponent(this.props.id,this.props.flowKey),l=this.fileInput.files[0],[4,this.fileReadAsDataURL(l)]):[3,10];case 1:return v=c.sent(),y=l.name.lastIndexOf(".")>=0?l.name.substring(0,l.name.lastIndexOf(".")):l.name,g=l.name.lastIndexOf(".")>=0?l.name.substring(l.name.lastIndexOf(".")+1).toLowerCase():"",b=l.type,w=l.size,(D=parseInt(e.attributes.maxSizeKB||0))>0&&w>1e3*D?(this.messageBox.showDialog("File Too Large",u.createElement("span",null,"The file you have chosen is ",w," bytes long and exceeds the maximum file size of ",D),[new d.modalDialogButton("Ok",this.messageBox.hideDialog)]),[3,9]):[3,2];case 2:return this.isImage(b)?(j=0,parseInt(e.attributes.imageSize||"0")>0&&(j=parseInt(e.attributes.imageSize)),j>0?[4,this.ResizeBase64Img(v,j)]:[3,4]):[3,4];case 3:v=c.sent(),c.label=4;case 4:return"ContentString"===e.contentType?manywho.state.setComponent(this.props.id,{contentValue:v},this.props.flowKey,!0):(M=manywho.state.getComponent(this.props.id,this.props.flowKey),O=void 0,(O=M.objectData&&M.objectData instanceof Array?M.objectData[0]:M.objectData)||(O=e.objectData&&e.objectData instanceof Array?e.objectData[0]:e.objectData),O&&(O.properties,(null===(t=e.attributes)||void 0===t?void 0:t.fileNameField)&&manywho.utils.setObjectDataProperty(O.properties,null===(n=e.attributes)||void 0===n?void 0:n.fileNameField,y),O.properties,(null===(i=e.attributes)||void 0===i?void 0:i.extensionField)&&manywho.utils.setObjectDataProperty(O.properties,null===(o=e.attributes)||void 0===o?void 0:o.extensionField,g),O.properties,(null===(a=e.attributes)||void 0===a?void 0:a.mimeTypeField)&&manywho.utils.setObjectDataProperty(O.properties,null===(r=e.attributes)||void 0===r?void 0:r.mimeTypeField,b),O.properties,(null===(s=e.attributes)||void 0===s?void 0:s.sizeField)&&manywho.utils.setObjectDataProperty(O.properties,null===(p=e.attributes)||void 0===p?void 0:p.sizeField,w),O.properties,(null===(h=e.attributes)||void 0===h?void 0:h.dataField)&&manywho.utils.setObjectDataProperty(O.properties,null===(f=e.attributes)||void 0===f?void 0:f.dataField,v)),manywho.state.setComponent(this.props.id,{objectData:[O]},this.props.flowKey,!0)),(null===(m=e.attributes)||void 0===m?void 0:m.onSelected)&&e.attributes.onSelected.length>0?(x=e.attributes.onSelected,C=manywho.model.getOutcomes(this.props.id,this.props.flowKey),(E=C.find((function(e){return e.developerName===x})))?[4,manywho.component.onOutcome(E,null,this.props.flowKey)]:[3,6]):[3,8];case 5:return c.sent(),[3,7];case 6:manywho.component.handleEvent(this,e,this.props.flowKey),c.label=7;case 7:return[3,9];case 8:manywho.component.handleEvent(this,e,this.props.flowKey),c.label=9;case 9:return[3,11];case 10:this.clearFile(!0),c.label=11;case 11:return[2]}}))}))},t.prototype.fileReadAsDataURL=function(e){return l(this,void 0,void 0,(function(){var t;return c(this,(function(n){return t=new FileReader,[2,new Promise((function(n,i){t.onerror=function(){t.abort(),i(new DOMException("Problem reading file"))},t.onload=function(){n(t.result)},t.readAsDataURL(e)}))]}))}))},t.prototype.ResizeBase64Img=function(e,t){return l(this,void 0,void 0,(function(){var n;return c(this,(function(i){return n=new Image,[2,new Promise((function(i,o){n.onload=function(){var e=n.height/n.width,o=document.createElement("canvas");o.width=t,o.height=t*e;var a=o.getContext("2d");n.width,a.scale(o.width/n.width,o.height/n.height),a.drawImage(n,0,0);var r=o.toDataURL();i(r)},n.onerror=function(){o(new DOMException("Problem loading image file"))},n.src=e}))]}))}))},t.prototype.render=function(){switch(manywho.model.getComponent(this.props.id,this.props.flowKey),this.mode){case"default":return this.defaultRender();case"basic":return this.basicRender()}},t.prototype.basicRender=function(){var e,t=this,n="";this.fileTypes.forEach((function(e){n.length>0&&(n+=","),e.startsWith(".")||(n+="."),n+=e}));var i,o={},a=manywho.model.getComponent(this.props.id,this.props.flowKey);return!1===a.isVisible&&(o.display="none"),a.width&&(o.width=a.width+"px"),a.height&&(o.height=a.height+"px"),this.state.file&&(i=u.createElement("span",{className:"glyphicon glyphicon-remove-circle file-picker-clear",onClick:function(e){t.clearFile(!0)},title:"Clear file selection"})),u.createElement("div",{style:o,id:this.props.id},u.createElement("span",{onClick:this.chooseFile,className:"file-picker-button"},"Choose file"),u.createElement("span",{className:"file-picker-filename"},null===(e=this.state.file)||void 0===e?void 0:e.name),i)},t.prototype.defaultRender=function(){var e,t,n,i,o,a,r,s=this,l=manywho.model.getComponent(this.props.id,this.props.flowKey),c=manywho.state.getComponent(this.props.id,this.props.flowKey),p="",h="",f=(null===(e=l.attributes)||void 0===e?void 0:e.title)||"Select File";"true"===(null===(n=null===(t=l.attributes)||void 0===t?void 0:t.transparent)||void 0===n?void 0:n.toLowerCase())?(p="file-picker-transparent "+(null===(i=l.attributes)||void 0===i?void 0:i.classes),h="file-picker-header-transparent ",f=""):(p="file-picker "+(null===(o=l.attributes)||void 0===o?void 0:o.classes),h="file-picker-header ");var m,v,y,g,b,w,D={width:"-webkit-fill-available",height:"-webkit-fill-available"};if(!1===l.isVisible&&(D.display="none"),l.width&&(D.width=l.width+"px"),l.height&&(D.height=l.height+"px"),m=this.pickFile,v=u.createElement("span",{className:"glyphicon glyphicon-remove file-picker-header-button",onClick:function(e){s.clearFile(!0)},title:"Clear selected file"}),"ContentString"===l.contentType)g=c.contentValue;else{var j=void 0;c&&c.objectData&&(j=c.objectData instanceof Array?c.objectData[0]:c.objectData),j||(j=l.objectData&&l.objectData instanceof Array?l.objectData[0]:l.objectData)&&manywho.state.setComponent(this.props.id,{objectData:[j]},this.props.flowKey,!0),j&&(b=null===(a=manywho.utils.getObjectDataProperty(j.properties,l.attributes.fileNameField))||void 0===a?void 0:a.contentValue,g=null===(r=manywho.utils.getObjectDataProperty(j.properties,l.attributes.dataField))||void 0===r?void 0:r.contentValue)}return g?(y=g.substring(g.indexOf(":")+1,g.indexOf(";")),w=this.isImage(y)?u.createElement("img",{style:{maxHeight:"100%",maxWidth:"100%",width:"auto",OObjectFit:"cover"},ref:function(e){s.img=e},className:"file-picker-image",src:g,onLoad:this.rescaleImage}):u.createElement("span",{className:"file-picker-file-name"},b)):w=u.createElement("div",{style:{display:"flex",flexDirection:"column",flexGrow:1}},u.createElement("div",{style:{margin:"auto",display:"flex",flexDirection:"column"}},u.createElement("span",{className:"file-picker-file-name",style:{margin:"auto"}},"No file selected"),u.createElement("span",{className:"file-picker-file-name",style:{margin:"auto"}},"Click to select a file"))),this.lastContent=u.createElement("div",{className:p,style:D},u.createElement(d.DialogBox,{ref:function(e){s.messageBox=e}}),u.createElement("div",{className:h},u.createElement("div",{className:"file-picker-header-left"},u.createElement("span",{className:"file-picker-header-title"},f)),u.createElement("div",{className:"file-picker-header-right"},v)),u.createElement("div",{className:"file-picker-body",onClick:m,ref:function(e){s.imgDiv=e}},w,u.createElement("input",{ref:function(e){s.fileInput=e},type:"file",className:"file-file",onChange:this.fileSelected}))),this.lastContent},t}(u.Component);t.default=p,manywho.component.register("FilePicker",p)},629:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(687),t)},804:e=>{"use strict";e.exports=React}},t={};!function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}(629)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBS1AsRUFBT0MsUUFBU0QsRUFBUUEsRUFBT0MsUUFBU0UsR0FHcEVILEVBQU9DLFFDbEJXRSxDQUFvQixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY3VzdC8uL3NyYy9EaWFsb2dCb3gudHN4Iiwid2VicGFjazovL2N1c3QvLi9zcmMvRXZlbnRNYW5hZ2VyLnRzIiwid2VicGFjazovL2N1c3QvLi9zcmMvRmlsZVBpY2tlci50c3giLCJ3ZWJwYWNrOi8vY3VzdC8uL3NyYy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vY3VzdC9leHRlcm5hbCBcIlJlYWN0XCIiLCJ3ZWJwYWNrOi8vY3VzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jdXN0L3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbXBvcnQgJy4vRGlhbG9nQm94LmNzcyc7XHJcblxyXG5cclxuXHJcbi8vIERlY2xhcmF0aW9uIG9mIHRoZSBjb21wb25lbnQgYXMgUmVhY3QgQ2xhc3MgQ29tcG9uZW50XHJcbmV4cG9ydCBjbGFzcyBEaWFsb2dCb3ggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8YW55LCBhbnk+IHtcclxuICAgIGRyYWdFdmVudDogRHJhZ0V2ZW50ID0gbmV3IERyYWdFdmVudCgpO1xyXG4gICAgbW9kYWw6IGFueTtcclxuICAgIGRpYWxvZzogYW55O1xyXG5cclxuICAgIGRpYWxvZ1Zpc2libGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGRpYWxvZ1RpdGxlOiBzdHJpbmcgPSAnJztcclxuICAgIGRpYWxvZ0J1dHRvbnM6IGFueSA9IFtdO1xyXG4gICAgZGlhbG9nQ29udGVudDogYW55O1xyXG4gICAgZGlhbG9nT25DbG9zZTogYW55ID0gdGhpcy5oaWRlRGlhbG9nO1xyXG5cclxuICAgIHRvcDogbnVtYmVyID0gMDtcclxuICAgIGxlZnQ6IG51bWJlciA9IDA7XHJcbiAgLy8gSW5pdCBvZiB0aGUgY29tcG9uZW50IGJlZm9yZSBpdCBpcyBtb3VudGVkLlxyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IGFueSkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuXHJcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlVcCA9IHRoaXMuaGFuZGxlS2V5VXAuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmhhbmRsZU91dHNpZGVDbGljayA9IHRoaXMuaGFuZGxlT3V0c2lkZUNsaWNrLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5zaG93RGlhbG9nID0gdGhpcy5zaG93RGlhbG9nLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5oaWRlRGlhbG9nID0gdGhpcy5oaWRlRGlhbG9nLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RGlhbG9nKGRpYWxvZzogSFRNTERpdkVsZW1lbnQpIHtcclxuICAgICAgdGhpcy5kaWFsb2cgPSBkaWFsb2c7XHJcbiAgICAgIGlmKHRoaXMuZGlhbG9nKSB7XHJcblxyXG4gICAgICAgICAgY29uc3QgcGFyZW50WENlbnRlciA9IHRoaXMuZGlhbG9nLm9mZnNldFBhcmVudC5jbGllbnRXaWR0aCAvIDI7XHJcbiAgICAgICAgICBjb25zdCBwYXJlbnRZQ2VudGVyID0gdGhpcy5kaWFsb2cub2Zmc2V0UGFyZW50LmNsaWVudEhlaWdodCAvIDI7XHJcbiAgICAgICAgICBjb25zdCBkaWFsb2dYT2Zmc2V0ID0gdGhpcy5kaWFsb2cuY2xpZW50V2lkdGggLyAyO1xyXG4gICAgICAgICAgY29uc3QgZGlhbG9nWU9mZnNldCA9IHRoaXMuZGlhbG9nLmNsaWVudEhlaWdodCAvIDI7XHJcblxyXG4gICAgICAgICAgdGhpcy5sZWZ0ID0gcGFyZW50WENlbnRlciAtIGRpYWxvZ1hPZmZzZXQ7XHJcbiAgICAgICAgICB0aGlzLnRvcCA9IHBhcmVudFlDZW50ZXIgLSBkaWFsb2dZT2Zmc2V0O1xyXG4gICAgICAgICAgdGhpcy5kaWFsb2cuY2xhc3NMaXN0LmFkZCgnc2hvd24nKTtcclxuICAgICAgICAgIHRoaXMucG9zaXRpb25EaWFsb2coKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHBvc2l0aW9uRGlhbG9nKCkge1xyXG4gICAgICBpZih0aGlzLmRpYWxvZykge1xyXG4gICAgICAgICAgdGhpcy5kaWFsb2cuc3R5bGUubGVmdCA9IHRoaXMubGVmdCArIFwicHhcIjtcclxuICAgICAgICAgIHRoaXMuZGlhbG9nLnN0eWxlLnRvcCA9IHRoaXMudG9wICsgXCJweFwiO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcEV2ZW50QnViYmxlKGU6ICBhbnkpIHtcclxuICAgICAgICBpZihlLnN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBpZihlLnByZXZlbnREZWZhdWx0KSBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgZS5jYW5jZWxCdWJibGU9dHJ1ZTtcclxuICAgICAgICBlLnJldHVyblZhbHVlPWZhbHNlO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBZGQgbGlzdGVuZXJzIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBjb21wb25lbnQgaXMgbW91bnRlZC5cclxuICAgIGNvbXBvbmVudERpZE1vdW50KCl7XHJcbiAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzaG93RGlhbG9nKHRpdGxlOiBzdHJpbmcsIGNvbnRlbnQ6IGFueSwgYnV0dG9uczogbW9kYWxEaWFsb2dCdXR0b25bXSwgb25DbG9zZT86IGFueSkge1xyXG4gICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gdGl0bGU7XHJcbiAgICAgIHRoaXMuZGlhbG9nQ29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgIHRoaXMuZGlhbG9nT25DbG9zZSA9IG9uQ2xvc2UgfHwgdGhpcy5oaWRlRGlhbG9nO1xyXG4gICAgICB0aGlzLmRpYWxvZ0J1dHRvbnMgPSBidXR0b25zO1xyXG4gICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICAgIC8vcmV0dXJuIHRoaXMucHJvcHMucGFyZW50LmZvcmNlVXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaGlkZURpYWxvZyhlPyA6IGFueSkge1xyXG4gICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nVGl0bGUgPSAnJztcclxuICAgICAgICB0aGlzLmRpYWxvZ0NvbnRlbnQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5kaWFsb2dPbkNsb3NlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nQnV0dG9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcclxuICAgICAgICAvL3JldHVybiB0aGlzLnByb3BzLnBhcmVudC5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gIFxyXG4gIFxyXG4gICAgLy8gSGFuZGxlIHRoZSBrZXkgcHJlc3MgZXZlbnQuXHJcbiAgICBoYW5kbGVLZXlVcChlOiBhbnkpIHtcclxuICAgICAgY29uc3Qga2V5czogYW55ID0ge1xyXG4gICAgICAgIDI3OiAoKSA9PiB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB0aGlzLmhpZGVEaWFsb2coKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgaWYgKGtleXNbZS5rZXlDb2RlXSkgeyBcclxuICAgICAgICBrZXlzW2Uua2V5Q29kZV0oKTsgXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgXHJcblxyXG4gICAgLy8gSGFuZGxlIHRoZSBtb3VzZSBjbGljayBvbiBicm93c2VyIHdpbmRvdy5cclxuICAgIGhhbmRsZU91dHNpZGVDbGljayhlOiBhbnkpIHtcclxuICAgICAgXHJcbiAgICAgIGlmICghdGhpcy5kaWFsb2cpIHtcclxuICAgICAgICAgIGlmICghdGhpcy5kaWFsb2cuY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZURpYWxvZygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXHJcblxyXG4gIC8vIFJlbmRlciB0aGUgY29tcG9uZW50IHBhc3Npbmcgb25DbG9zZVJlcXVlc3QgYW5kIGNoaWxkcmVuIGFzIHByb3BzLlxyXG4gIHJlbmRlcigpIHtcclxuICAgIGxldCBjb250ZW50OiBhbnk7XHJcbiAgICBpZih0aGlzLmRpYWxvZ1Zpc2libGUgPT09IGZhbHNlKSB7XHJcbiAgICAgIGNvbnRlbnQgPSAoXHJcbiAgICAgICAgICA8ZGl2Lz5cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjb25zdCBidXR0b25zOiBBcnJheTxKU1guRWxlbWVudD4gPSBbXTtcclxuICAgICAgZm9yKGNvbnN0IGJ1dHRvbiBvZiB0aGlzLmRpYWxvZ0J1dHRvbnMpIHtcclxuICAgICAgICAgIGJ1dHRvbnMucHVzaChcclxuICAgICAgICAgICAgICA8YnV0dG9uIFxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtb2RhbC1kaWFsb2ctYnV0dG9uLWJhci1idXR0b25cIiBcclxuICAgICAgICAgICAgICAgICAgdGl0bGU9XCJDYW5jZWxcIiBcclxuICAgICAgICAgICAgICAgICAgb25Nb3VzZURvd249eyhlKSA9PiB7ZS5zdG9wUHJvcGFnYXRpb24oKTtidXR0b24uaGFuZGxlcigpfX1cclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgIHtidXR0b24ubGFiZWx9XHJcbiAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnRlbnQgPSAoXHJcbiAgICAgICAgPGRpdiBcclxuICAgICAgICAgIGNsYXNzTmFtZT1cIm1vZGFsLXJlZGFjdGlvblwiXHJcbiAgICAgICAgICBvbk1vdXNlTW92ZT17KGUpID0+IHt0aGlzLm9uTW91c2VNb3ZlKGUpfX1cclxuICAgICAgICAgIG9uTW91c2VVcD17KGUpID0+IHt0aGlzLm9uTW91c2VVcChlKX19XHJcbiAgICAgICAgICBvbk1vdXNlRG93bj17KGUpID0+IHt0aGlzLmhhbmRsZU91dHNpZGVDbGljayhlKX19XHJcbiAgICAgICAgICBvbkNvbnRleHRNZW51PXtlID0+IHtlLnByZXZlbnREZWZhdWx0KCk7IGUuc3RvcFByb3BhZ2F0aW9uKCk7aWYodGhpcy5wcm9wcy5vbkNvbnRleHRNZW51KXt0aGlzLnByb3BzLm9uQ29udGV4dE1lbnUoKX19fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1vZGFsLWNvbnRlbnRcIlxyXG4gICAgICAgICAgICByZWY9eyhub2RlKSA9PiB7dGhpcy5zZXREaWFsb2cobm9kZSl9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1kaWFsb2dcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm1vZGFsLWRpYWxvZy1oZWFkZXJcIlxyXG4gICAgICAgICAgICAgICAgICBvbk1vdXNlRG93bj17KGUpID0+IHt0aGlzLm9uTW91c2VEb3duKGUpfX1cclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Rpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogXCJyb3dcIiwgZmxleEdyb3c6IDF9fT5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtb2RhbC1kaWFsb2ctaGVhZGVyLXRpdGxlXCI+e3RoaXMuZGlhbG9nVGl0bGV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17e2Rpc3BsYXk6ICdmbGV4JywgZmxleERpcmVjdGlvbjogXCJyb3dcIiwgbWFyZ2luTGVmdDogJ2F1dG8nLCBmbGV4R3JvdzogMH19PlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZSBtb2RhbC1kaWFsb2ctaGVhZGVyLWJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkNsb3NlXCJcclxuICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXsoZSkgPT4ge2Uuc3RvcFByb3BhZ2F0aW9uKCk7IHRoaXMuZGlhbG9nT25DbG9zZSgpfX1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1kaWFsb2ctYm9keVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtZGlhbG9nLWJvZHktY2xpZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMuZGlhbG9nQ29udGVudH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2RpdiA+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtZGlhbG9nLWJ1dHRvbi1iYXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHtidXR0b25zfSAgIFxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2RpdiA+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb250ZW50O1xyXG4gIH1cclxuXHJcbiAgbW92ZU1lKGxlZnQ6IG51bWJlciwgdG9wOiBudW1iZXIpIHtcclxuICAgICAgdGhpcy5sZWZ0ID0gbGVmdDtcclxuICAgICAgdGhpcy50b3AgPSB0b3A7IC8vIC0gdGhpcy5ib3guZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgICB0aGlzLnBvc2l0aW9uRGlhbG9nKCk7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlRG93bihlOiBhbnkpIHtcclxuICAgIC8vdGhpcy5zdG9wRXZlbnRCdWJibGUoZSk7XHJcbiAgICAvL2luY2x1ZGUgY29tcG9uZW50IGJvdW5kaW5nIHJlY3QgdG8gYWxsb3cgZm9yIG1vdXNlIG9mZnNldCBpbnRvIGNvbXBvbmVudFxyXG4gICAgbGV0IGNsaWVudFJlY3QgPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGxldCBtb3VzZU9mZnNldFk6IG51bWJlciA9IGUuY2xpZW50WSAtIGNsaWVudFJlY3QudG9wO1xyXG4gICAgdGhpcy5kcmFnRXZlbnQgPSBEcmFnRXZlbnQuc3RhcnQoZURyYWdFdmVudFR5cGUuZGlhbG9nLCB0aGlzLCBlLmNsaWVudFggLSBjbGllbnRSZWN0LmxlZnQsIG1vdXNlT2Zmc2V0WSk7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlTW92ZShlOiBhbnkpIHtcclxuICAgIC8vdGhpcy5zdG9wRXZlbnRCdWJibGUoZSk7XHJcbiAgICBpZih0aGlzLmRyYWdFdmVudC50eXBlID09PSBlRHJhZ0V2ZW50VHlwZS5kaWFsb2cpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMubW92ZU1lKGUuY2xpZW50WCAtIHRoaXMuZHJhZ0V2ZW50Lm1vdXNlT2Zmc2V0WCwgZS5jbGllbnRZIC0gdGhpcy5kcmFnRXZlbnQubW91c2VPZmZzZXRZKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uTW91c2VVcChlOiBhbnkpIHtcclxuICAgIC8vdGhpcy5zdG9wRXZlbnRCdWJibGUoZSk7XHJcbiAgICBpZih0aGlzLmRyYWdFdmVudC50eXBlID09PSBlRHJhZ0V2ZW50VHlwZS5kaWFsb2cpXHJcbiAgICB7XHJcbiAgICAgIHRoaXMuZHJhZ0V2ZW50LmVuZChudWxsLGUuY2xpZW50WCwgZS5jbGllbnRZKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBtb2RhbERpYWxvZ0J1dHRvbiB7XHJcbiAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgaGFuZGxlcjogYW55O1xyXG4gIFxyXG4gICAgY29uc3RydWN0b3IobGFiZWw6IHN0cmluZywgaGFuZGxlcjogYW55KSB7XHJcbiAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcclxuICAgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZXhwb3J0IGVudW0gZURyYWdFdmVudFR5cGVcclxuICB7XHJcbiAgICAgIHVua25vd24sXHJcbiAgICAgIGNhbnZhcyxcclxuICAgICAgdGFibGUsXHJcbiAgICAgIGxpbmssXHJcbiAgICAgIGRpYWxvZ1xyXG4gIH1cclxuICBcclxuICBleHBvcnQgY2xhc3MgRHJhZ0V2ZW50XHJcbiAge1xyXG4gICAgICB0eXBlOiBlRHJhZ0V2ZW50VHlwZTtcclxuICAgICAgc291cmNlRWxlbWVudDogYW55O1xyXG4gICAgICB0YXJnZXRFbGVtZW50OiBhbnk7XHJcbiAgICAgIG1vdXNlWDogbnVtYmVyO1xyXG4gICAgICBtb3VzZVk6IG51bWJlcjtcclxuICAgICAgbW91c2VPZmZzZXRYOiBudW1iZXI7XHJcbiAgICAgIG1vdXNlT2Zmc2V0WTogbnVtYmVyO1xyXG4gIFxyXG4gICAgICBjb25zdHJ1Y3RvcigpXHJcbiAgICAgIHtcclxuICAgICAgICAgIHRoaXMudHlwZSA9IGVEcmFnRXZlbnRUeXBlLnVua25vd247XHJcbiAgICAgICAgICB0aGlzLnNvdXJjZUVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgdGhpcy50YXJnZXRFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICAgIHRoaXMubW91c2VYID0gMDtcclxuICAgICAgICAgIHRoaXMubW91c2VZID0gMDtcclxuICAgICAgICAgIHRoaXMubW91c2VPZmZzZXRYID0gMDtcclxuICAgICAgICAgIHRoaXMubW91c2VPZmZzZXRZID0gMDtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICBwdWJsaWMgc3RhdGljIHN0YXJ0KHR5cGU6IGVEcmFnRXZlbnRUeXBlLCBzb3VyY2VFbGVtZW50OiBhbnksIG1vdXNlWDogbnVtYmVyLCBtb3VzZVk6IG51bWJlcik6IERyYWdFdmVudFxyXG4gICAgICB7XHJcbiAgICAgICAgICBjb25zdCBldnQ6IERyYWdFdmVudCA9IG5ldyBEcmFnRXZlbnQoKTtcclxuICAgICAgICAgIGV2dC50eXBlID0gdHlwZTtcclxuICAgICAgICAgIGV2dC5zb3VyY2VFbGVtZW50ID0gc291cmNlRWxlbWVudDtcclxuICAgICAgICAgIGV2dC50YXJnZXRFbGVtZW50ID0gbnVsbDtcclxuICAgICAgICAgIGV2dC5tb3VzZVggPSBtb3VzZVg7XHJcbiAgICAgICAgICBldnQubW91c2VZID0gbW91c2VZO1xyXG4gICAgICAgICAgZXZ0Lm1vdXNlT2Zmc2V0WCA9IG1vdXNlWDtcclxuICAgICAgICAgIGV2dC5tb3VzZU9mZnNldFkgPSBtb3VzZVk7XHJcbiAgICAgICAgICByZXR1cm4gZXZ0O1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGRyYWcobW91c2VYOiBudW1iZXIsIG1vdXNlWTogbnVtYmVyKVxyXG4gICAgICB7XHJcbiAgICAgICAgICB0aGlzLm1vdXNlWCA9IG1vdXNlWDtcclxuICAgICAgICAgIHRoaXMubW91c2VZID0gbW91c2VZO1xyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGVuZCh0YXJnZXQ6IGFueSwgbW91c2VYOiBudW1iZXIsIG1vdXNlWTogbnVtYmVyKSA6IGFueVxyXG4gICAgICB7XHJcbiAgXHJcbiAgICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQgPSB0YXJnZXQ7XHJcbiAgICAgICAgICB0aGlzLm1vdXNlWCA9IG1vdXNlWDtcclxuICAgICAgICAgIHRoaXMubW91c2VZID0gbW91c2VZO1xyXG4gIFxyXG4gICAgICAgICAgdGhpcy50eXBlPWVEcmFnRXZlbnRUeXBlLnVua25vd247ICAgICAgXHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4iLCJkZWNsYXJlIGNvbnN0IG1hbnl3aG86IGFueTtcclxuZGVjbGFyZSBjb25zdCBjdWx0dXJlOiBhbnk7XHJcblxyXG5pZiAoIShtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyKSB7XHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlciA9IHt9O1xyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZExpc3RlbmVycyA9IHt9O1xyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZG9uZUxpc3RlbmVycyA9IHt9O1xyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuaW5pdGlhbGl6ZWRMaXN0ZW5lcnMgPSB7fTtcclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmpvaW5MaXN0ZW5lcnMgPSB7fTtcclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmZhaWxMaXN0ZW5lcnMgPSB7fTtcclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLm91dGNvbWVCZWluZ1RyaWdnZXJlZDtcclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmhpc3RvcnkgPSBbXTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5iZWZvcmVTZW5kID0gKHhocjogWE1MSHR0cFJlcXVlc3QsIHJlcXVlc3Q6IGFueSkgPT4ge1xyXG4gICAgICAgIGlmKHhocikge1xyXG4gICAgICAgICAgICBpZih3aW5kb3cuaGFzT3duUHJvcGVydHkoXCJjdWx0dXJlXCIpICYmIGN1bHR1cmUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDdWx0dXJlXCIsIGN1bHR1cmUpOyAvL1wiQnJhbmQ9WEwmQ291bnRyeT1YTCZMYW5ndWFnZT1FUyZWYXJpYW50PVhMXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcjogYW55KSA9PiBsaXN0ZW5lcih4aHIsIHJlcXVlc3QpKTtcclxuICAgICAgICBmb3IoY29uc3Qga2V5IGluIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmJlZm9yZVNlbmRMaXN0ZW5lcnMgKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZExpc3RlbmVyc1trZXldKHhociwgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5qb2luID0gKHhocjogWE1MSHR0cFJlcXVlc3QsIHJlcXVlc3Q6IGFueSkgPT4ge1xyXG4gICAgICAgIC8vKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZG9uZUxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcjogYW55KSA9PiBsaXN0ZW5lcih4aHIsIHJlcXVlc3QpKTtcclxuICAgICAgICBmb3IoY29uc3Qga2V5IGluIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmpvaW5MaXN0ZW5lcnMgKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuam9pbkxpc3RlbmVyc1trZXldKHhociwgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5kb25lID0gKHhocjogWE1MSHR0cFJlcXVlc3QsIHJlcXVlc3Q6IGFueSkgPT4ge1xyXG4gICAgICAgIC8vKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZG9uZUxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcjogYW55KSA9PiBsaXN0ZW5lcih4aHIsIHJlcXVlc3QpKTtcclxuICAgICAgICBmb3IoY29uc3Qga2V5IGluIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmRvbmVMaXN0ZW5lcnMgKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZG9uZUxpc3RlbmVyc1trZXldKHhociwgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5pbml0aWFsaXplZCA9ICh4aHI6IFhNTEh0dHBSZXF1ZXN0LCByZXF1ZXN0OiBhbnkpID0+IHtcclxuICAgICAgICAvLyhtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmRvbmVMaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXI6IGFueSkgPT4gbGlzdGVuZXIoeGhyLCByZXF1ZXN0KSk7XHJcbiAgICAgICAgZm9yKGNvbnN0IGtleSBpbiAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5pbml0aWFsaXplZExpc3RlbmVycyApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5pbml0aWFsaXplZExpc3RlbmVyc1trZXldKHhociwgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5mYWlsID0gKHhocjogWE1MSHR0cFJlcXVlc3QsIHJlcXVlc3Q6IGFueSkgPT4ge1xyXG4gICAgICAgIC8vKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZmFpbExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcjogYW55KSA9PiBsaXN0ZW5lcih4aHIsIHJlcXVlc3QpKTtcclxuICAgICAgICBmb3IoY29uc3Qga2V5IGluIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmZhaWxMaXN0ZW5lcnMgKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZmFpbExpc3RlbmVyc1trZXldKHhociwgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5hZGRCZWZvcmVTZW5kTGlzdGVuZXIgPSAoaGFuZGxlcjogKHhocjogWE1MSHR0cFJlcXVlc3QsIHJlcXVlc3Q6IGFueSkgPT4gdm9pZCwgY29tcG9uZW50SWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmJlZm9yZVNlbmRMaXN0ZW5lcnNbY29tcG9uZW50SWRdID0gaGFuZGxlcjtcclxuICAgIH07XHJcblxyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIucmVtb3ZlQmVmb3JlU2VuZExpc3RlbmVyID0gKGNvbXBvbmVudElkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBkZWxldGUgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZExpc3RlbmVyc1tjb21wb25lbnRJZF07XHJcbiAgICB9O1xyXG5cclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmFkZEluaXRpYWxpemVkTGlzdGVuZXIgPSAoaGFuZGxlcjogKHhocjogWE1MSHR0cFJlcXVlc3QsIHJlcXVlc3Q6IGFueSkgPT4gdm9pZCwgY29tcG9uZW50SWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmluaXRpYWxpemVkTGlzdGVuZXJzW2NvbXBvbmVudElkXSA9IGhhbmRsZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLnJlbW92ZUluaXRpYWxpemVkTGlzdGVuZXIgPSAoY29tcG9uZW50SWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGRlbGV0ZSAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5pbml0aWFsaXplZExpc3RlbmVyc1tjb21wb25lbnRJZF07XHJcbiAgICB9O1xyXG5cclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmFkZEpvaW5MaXN0ZW5lciA9IChoYW5kbGVyOiAoeGhyOiBYTUxIdHRwUmVxdWVzdCwgcmVxdWVzdDogYW55KSA9PiB2b2lkLCBjb21wb25lbnRJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuam9pbkxpc3RlbmVyc1tjb21wb25lbnRJZF0gPSBoYW5kbGVyO1xyXG4gICAgfTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5yZW1vdmVKb2luTGlzdGVuZXIgPSAoY29tcG9uZW50SWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGRlbGV0ZSAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5qb2luTGlzdGVuZXJzW2NvbXBvbmVudElkXTtcclxuICAgIH07XHJcblxyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYWRkRG9uZUxpc3RlbmVyID0gKGhhbmRsZXI6ICh4aHI6IFhNTEh0dHBSZXF1ZXN0LCByZXF1ZXN0OiBhbnkpID0+IHZvaWQsIGNvbXBvbmVudElkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5kb25lTGlzdGVuZXJzW2NvbXBvbmVudElkXSA9IGhhbmRsZXI7XHJcbiAgICB9O1xyXG5cclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLnJlbW92ZURvbmVMaXN0ZW5lciA9IChjb21wb25lbnRJZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmRvbmVMaXN0ZW5lcnNbY29tcG9uZW50SWRdO1xyXG4gICAgfTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5hZGRGYWlsTGlzdGVuZXIgPSAoaGFuZGxlcjogKHhocjogWE1MSHR0cFJlcXVlc3QsIHJlcXVlc3Q6IGFueSkgPT4gdm9pZCwgY29tcG9uZW50SWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmZhaWxMaXN0ZW5lcnNbY29tcG9uZW50SWRdID0gaGFuZGxlcjtcclxuICAgIH07XHJcblxyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIucmVtb3ZlRmFpbExpc3RlbmVyID0gKGNvbXBvbmVudElkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBkZWxldGUgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZmFpbExpc3RlbmVyc1tjb21wb25lbnRJZF07XHJcbiAgICB9O1xyXG5cclxuICAgIG1hbnl3aG8uc2V0dGluZ3MuaW5pdGlhbGl6ZShudWxsLCB7XHJcbiAgICAgICAgaW52b2tlOiB7XHJcbiAgICAgICAgICAgIGJlZm9yZVNlbmQ6IChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmJlZm9yZVNlbmQsXHJcbiAgICAgICAgICAgIGRvbmU6IChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmRvbmUsXHJcbiAgICAgICAgICAgIGZhaWw6IChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmZhaWwsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbml0aWFsaXphdGlvbjoge1xyXG4gICAgICAgICAgICBiZWZvcmVTZW5kOiAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5iZWZvcmVTZW5kLFxyXG4gICAgICAgICAgICBkb25lOiAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5pbml0aWFsaXplZCxcclxuICAgICAgICAgICAgZmFpbDogKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZmFpbCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGpvaW46IHtcclxuICAgICAgICAgICAgYmVmb3JlU2VuZDogKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZCxcclxuICAgICAgICAgICAgZG9uZTogKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuam9pbixcclxuICAgICAgICAgICAgZmFpbDogKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZmFpbCxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydHt9OyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0ICcuL0ZpbGVQaWNrZXIuY3NzJztcclxuXHJcbmltcG9ydCAnLi9FdmVudE1hbmFnZXInO1xyXG5pbXBvcnQgeyBDU1NQcm9wZXJ0aWVzIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBEaWFsb2dCb3gsIG1vZGFsRGlhbG9nQnV0dG9uIH0gZnJvbSAnLi9EaWFsb2dCb3gnO1xyXG5cclxuZGVjbGFyZSBjb25zdCBtYW55d2hvOiBhbnk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWxlUGlja2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSxhbnk+IHtcclxuICAgIHNlbGVjdGVkSXRlbTogc3RyaW5nID0gbnVsbDtcclxuICAgIGltZ0RpdjogYW55O1xyXG4gICAgaW1nOiBhbnk7XHJcbiAgICB0ZXh0OiBzdHJpbmcgPSAnJztcclxuICAgIGZpbGVJbnB1dDogSFRNTElucHV0RWxlbWVudDtcclxuICAgIG1vZGU6IHN0cmluZztcclxuICAgIGZpbGVUeXBlczogc3RyaW5nW107XHJcblxyXG4gICAgbWVzc2FnZUJveDogRGlhbG9nQm94O1xyXG5cclxuICAgIGxhc3RDb250ZW50OiBhbnkgPSAoPGRpdj48L2Rpdj4pO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBhbnkpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5maWxlU2VsZWN0ZWQgPSB0aGlzLmZpbGVTZWxlY3RlZC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZmlsZVJlYWRBc0RhdGFVUkwgPSB0aGlzLmZpbGVSZWFkQXNEYXRhVVJMLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5SZXNpemVCYXNlNjRJbWcgPSB0aGlzLlJlc2l6ZUJhc2U2NEltZy5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJGaWxlID0gdGhpcy5jbGVhckZpbGUuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLnBpY2tGaWxlID0gdGhpcy5waWNrRmlsZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2hvb3NlRmlsZSA9IHRoaXMuY2hvb3NlRmlsZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaXNJbWFnZSA9IHRoaXMuaXNJbWFnZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVzY2FsZUltYWdlID0gdGhpcy5yZXNjYWxlSW1hZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmZsb3dNb3ZlZCA9IHRoaXMuZmxvd01vdmVkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5jaG9vc2VGaWxlID0gdGhpcy5jaG9vc2VGaWxlLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgIGxldCBtb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZWwuYXR0cmlidXRlcz8ubW9kZSB8fCBcImRlZmF1bHRcIjtcclxuICAgICAgICB0aGlzLmZpbGVUeXBlcyA9IG1vZGVsLmF0dHJpYnV0ZXM/LmFsbG93ZWQ/LnNwbGl0KFwiLFwiKSB8fCBbXCIqXCJdO1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlPXtcclxuICAgICAgICAgICAgaW1nRGF0YTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBmaWxlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmbG93TW92ZWQoeGhyOiBhbnksIHJlcXVlc3Q6IGFueSkge1xyXG4gICAgICAgIGxldCBtZTogYW55ID0gdGhpcztcclxuICAgICAgICBpZih4aHIuaW52b2tlVHlwZT09PSdGT1JXQVJEJykge1xyXG4gICAgICAgICAgIC8vbWFueXdoby5tb2RlbC5wYXJzZUVuZ2luZVJlc3BvbnNlKHhociwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICAgICAvL2F3YWl0IHRoaXMucHJlc2VydmVTdGF0ZSgpO1xyXG4gICAgICAgICAgIC8vdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHhoci5pbnZva2VUeXBlPT09J1NZTkMnKSB7XHJcbiAgICAgICAgICAgIC8vbWFueXdoby5tb2RlbC5wYXJzZUVuZ2luZVN5bmNSZXNwb25zZSh4aHIsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgICAgIC8vYXdhaXQgdGhpcy5wcmVzZXJ2ZVN0YXRlKCk7XHJcbiAgICAgICAgICAgIC8vdGhpcy5mb3JjZVVwZGF0ZSgpO1xyXG4gICAgICAgICB9XHJcbiAgICAgfVxyXG5cclxuICAgIGFzeW5jIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgICAgIC8vKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYWRkRG9uZUxpc3RlbmVyKHRoaXMuZmxvd01vdmVkLCB0aGlzLnByb3BzLmlkKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnByZXNlcnZlU3RhdGUoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmNsZWFyRmlsZSh0cnVlKTtcclxuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcHJlc2VydmVTdGF0ZSgpe1xyXG4gICAgICAgIGxldCBtb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgbGV0IG5ld1N0YXRlIDogYW55ID0ge307XHJcbiAgICAgICAgaWYgKG1vZGVsLmNvbnRlbnRUeXBlID09PSAnQ29udGVudFN0cmluZycpIHtcclxuICAgICAgICAgICAgbmV3U3RhdGUuY29udGVudFZhbHVlID0gbW9kZWwuY29udGVudFZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbmV3U3RhdGUub2JqZWN0RGF0YSA9IG1vZGVsLm9iamVjdERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIG5ld1N0YXRlLCB0aGlzLnByb3BzLmZsb3dLZXksdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICAgICAgLy8obWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5yZW1vdmVEb25lTGlzdGVuZXIodGhpcy5wcm9wcy5pZCk7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICByZXNjYWxlSW1hZ2UoZTogYW55KSB7XHJcbiAgICAgICAgY29uc3Qgd2lkdGg6IG51bWJlciA9IHRoaXMuaW1nLndpZHRoO1xyXG4gICAgICAgIGNvbnN0IGhlaWdodDogbnVtYmVyID0gdGhpcy5pbWcuaGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBuZWVkIHRvIGNoZWNrIG9uIElFIGNvbXBhdGliaWxpdHkgaGVyZSAtIGkgdGhpbmsgYXNwZWN0IHJhdGlvbiBpcyB3cm9uZyBpbiBJRVxyXG4gICAgICAgIGlmICh3aWR0aCA+PSBoZWlnaHQpIHtcclxuICAgICAgICAgICAgIHRoaXMuaW1nLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAgdGhpcy5pbWcuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmltZ0Rpdi5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgIHRoaXMuaW1nLnN0eWxlLndpZHRoID0gJ2F1dG8nO1xyXG4gICAgICAgICAgICAgdGhpcy5pbWcuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAvLyB0aGlzLmltZ0Rpdi5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ3Jvdyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG4gICAgYXN5bmMgY2xlYXJGaWxlKG5vdGlmeTogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNsZWFyIGZpbGVcIik7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGltZ0RhdGE6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgZmlsZTogdW5kZWZpbmVkLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgbW9kZWwgPSBtYW55d2hvLm1vZGVsLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBuZXdTdGF0ZSA6IGFueSA9IHt9O1xyXG4gICAgICAgIGlmIChtb2RlbC5jb250ZW50VHlwZSA9PT0gJ0NvbnRlbnRTdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHtjb250ZW50VmFsdWU6IFwiXCJ9LCB0aGlzLnByb3BzLmZsb3dLZXksdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgc3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgICAgICBsZXQgb2JqRGF0YTogYW55O1xyXG4gICAgICAgICAgICBpZihzdGF0ZS5vYmplY3REYXRhICYmIHN0YXRlLm9iamVjdERhdGEgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgb2JqRGF0YSA9IHN0YXRlLm9iamVjdERhdGFbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmpEYXRhID0gc3RhdGUub2JqZWN0RGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighb2JqRGF0YSl7XHJcbiAgICAgICAgICAgICAgICBpZihtb2RlbC5vYmplY3REYXRhICYmIG1vZGVsLm9iamVjdERhdGEgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iakRhdGEgPSBtb2RlbC5vYmplY3REYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqRGF0YSA9IG1vZGVsLm9iamVjdERhdGE7XHJcbiAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKG9iakRhdGEpIHtcclxuICAgICAgICAgICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iakRhdGEucHJvcGVydGllcyxtb2RlbC5hdHRyaWJ1dGVzPy5maWxlTmFtZUZpZWxkLFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXM/LmV4dGVuc2lvbkZpZWxkLFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXM/Lm1pbWVUeXBlRmllbGQsXCJcIik7XHJcbiAgICAgICAgICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmpEYXRhLnByb3BlcnRpZXMsbW9kZWwuYXR0cmlidXRlcz8uc2l6ZUZpZWxkLFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXM/LmRhdGFGaWVsZCxcIlwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBvYmpEYXRhLmlzU2VsZWN0ZWQ9ZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWFueXdoby5zdGF0ZS5zZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwge29iamVjdERhdGE6IFtvYmpEYXRhXX0sIHRoaXMucHJvcHMuZmxvd0tleSx0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1vZGVsLmF0dHJpYnV0ZXM/Lm9uQ2xlYXJlZCAmJiBtb2RlbC5hdHRyaWJ1dGVzLm9uQ2xlYXJlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBvdXRjb21lczogYW55ID0gbWFueXdoby5tb2RlbC5nZXRPdXRjb21lcyh0aGlzLnByb3BzLmlkLHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgICAgIGxldCBjbG9zZU91dGNvbWU6IGFueSA9IG91dGNvbWVzLmZpbmQoKG91dGNvbWU6IGFueSkgPT4gb3V0Y29tZS5kZXZlbG9wZXJOYW1lID09PSBtb2RlbC5hdHRyaWJ1dGVzLm9uQ2xlYXJlZCk7XHJcbiAgICAgICAgICAgIGlmKGNsb3NlT3V0Y29tZSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgbWFueXdoby5jb21wb25lbnQub25PdXRjb21lKGNsb3NlT3V0Y29tZSwgbnVsbCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmKG5vdGlmeSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbnl3aG8uY29tcG9uZW50LmhhbmRsZUV2ZW50KHRoaXMsIG1vZGVsLCB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZihub3RpZnkgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIG1hbnl3aG8uY29tcG9uZW50LmhhbmRsZUV2ZW50KHRoaXMsIG1vZGVsLCB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwaWNrRmlsZSgpIHtcclxuICAgICAgICB0aGlzLmZpbGVJbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuZmlsZUlucHV0LmNsaWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNJbWFnZShtaW1lVHlwZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgc3dpdGNoIChtaW1lVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICdpbWFnZS9qcGcnOlxyXG4gICAgICAgICAgICBjYXNlICdpbWFnZS9qcGVnJzpcclxuICAgICAgICAgICAgY2FzZSAnaW1hZ2UvYm1wJzpcclxuICAgICAgICAgICAgY2FzZSAnaW1hZ2UvZ2lmJzpcclxuICAgICAgICAgICAgY2FzZSAnaW1hZ2UvZ2lmZic6XHJcbiAgICAgICAgICAgIGNhc2UgJ2ltYWdlL3BuZyc6XHJcbiAgICAgICAgICAgIGNhc2UgJ2ltYWdlL3dlYnAnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiBcclxuICAgIGFzeW5jIGNob29zZUZpbGUoZTogYW55KSB7XHJcblxyXG4gICAgICAgIGxldCBwaWNrZXJPcHRzOiBhbnkgPSB7XHJcbiAgICAgICAgICAgIHR5cGVzOiBbXSxcclxuICAgICAgICAgICAgZXhjbHVkZUFjY2VwdEFsbE9wdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgbXVsdGlwbGU6IGZhbHNlLFxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IG1vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICBsZXQgYXR0cjogc3RyaW5nID0gbW9kZWwuYXR0cmlidXRlcz8uZXh0ZW5zaW9ucyB8fCBcIipcIjtcclxuICAgICAgICBsZXQgdHlwZXM6IHN0cmluZ1tdID0gYXR0ci5zcGxpdChcIixcIik7XHJcbiAgICAgICAgdHlwZXMuZm9yRWFjaCgodHlwZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIHR5cGU9dHlwZS50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgc3dpdGNoKHR5cGUpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIipcIjpcclxuICAgICAgICAgICAgICAgICAgICBwaWNrZXJPcHRzLmV4Y2x1ZGVBY2NlcHRBbGxPcHRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjc3ZcIjpcclxuICAgICAgICAgICAgICAgICAgICBwaWNrZXJPcHRzLnR5cGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NTViBGaWxlcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RleHQvY3N2JzogWycuY3N2J10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ4bHN4XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyT3B0cy50eXBlcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFeGNlbCBGaWxlcycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY2VwdDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0JzogWycueGxzeiddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgIGxldCBoYW5kbGU6IGFueVtdID0gYXdhaXQgKHdpbmRvdyBhcyBhbnkpLnNob3dPcGVuRmlsZVBpY2tlcihwaWNrZXJPcHRzKTtcclxuICAgICAgICAgICAgaWYoaGFuZGxlWzBdLmtpbmQgPT09ICdmaWxlJykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbGUgPSBhd2FpdCBoYW5kbGVbMF0uZ2V0RmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmZpbGVSZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmlsZTogZmlsZSwgaW1hZ2VEYXRhOiBkYXRhfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2goZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJkb25lXCIpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVDaG9zZW4oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZmlsZUNob3NlbigpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5maWxlPy5uYW1lPy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBtb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7ICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZm5hbWU6IHN0cmluZyA9IHRoaXMuc3RhdGUuZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJykgPj0gMCA/IHRoaXMuc3RhdGUuZmlsZS5uYW1lLnN1YnN0cmluZygwLCB0aGlzLnN0YXRlLmZpbGUubmFtZS5sYXN0SW5kZXhPZignLicpKSA6IHRoaXMuc3RhdGUuZmlsZS5uYW1lO1xyXG4gICAgICAgICAgICBjb25zdCBleHQ6IHN0cmluZyA9IHRoaXMuc3RhdGUuZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJykgPj0gMCA/IHRoaXMuc3RhdGUuZmlsZS5uYW1lLnN1YnN0cmluZyh0aGlzLnN0YXRlLmZpbGUubmFtZS5sYXN0SW5kZXhPZignLicpICsgMSkudG9Mb3dlckNhc2UoKSA6ICcnO1xyXG4gICAgICAgICAgICBjb25zdCB0eXA6IHN0cmluZyA9IHRoaXMuc3RhdGUuZmlsZS50eXBlO1xyXG4gICAgICAgICAgICBjb25zdCBzaXplOiBudW1iZXIgPSB0aGlzLnN0YXRlLmZpbGUuc2l6ZTtcclxuICAgICAgICAgICAgbGV0IGRhdGFVUkw6IHN0cmluZyA9IHRoaXMuc3RhdGUuaW1hZ2VEYXRhO1xyXG5cclxuICAgICAgICAgICAgbGV0IG1heFNpemU6IG51bWJlciA9IHBhcnNlSW50KG1vZGVsLmF0dHJpYnV0ZXNbXCJtYXhTaXplS0JcIl0gfHwgMCk7XHJcbiAgICAgICAgICAgIGlmKG1heFNpemU+MCAmJiBzaXplPihtYXhTaXplICogMTAwMCkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlQm94LnNob3dEaWFsb2coXHJcbiAgICAgICAgICAgICAgICAgICAgXCJGaWxlIFRvbyBMYXJnZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICg8c3Bhbj5UaGUgZmlsZSB5b3UgaGF2ZSBjaG9zZW4gaXMgeyBzaXplIH0gYnl0ZXMgbG9uZyBhbmQgZXhjZWVkcyB0aGUgbWF4aW11bSBmaWxlIHNpemUgb2YgeyBtYXhTaXplIH08L3NwYW4+KSxcclxuICAgICAgICAgICAgICAgICAgICBbbmV3IG1vZGFsRGlhbG9nQnV0dG9uKFwiT2tcIix0aGlzLm1lc3NhZ2VCb3guaGlkZURpYWxvZyldXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzSW1hZ2UodHlwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbWdTaXplOiBudW1iZXIgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChtb2RlbC5hdHRyaWJ1dGVzWydpbWFnZVNpemUnXSB8fCAnMCcpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWdTaXplID0gcGFyc2VJbnQobW9kZWwuYXR0cmlidXRlc1snaW1hZ2VTaXplJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihpbWdTaXplID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVVJMID0gYXdhaXQgdGhpcy5SZXNpemVCYXNlNjRJbWcoZGF0YVVSTCwgaW1nU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBuZXdTdGF0ZSA6IGFueSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsLmNvbnRlbnRUeXBlID09PSAnQ29udGVudFN0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYW55d2hvLnN0YXRlLnNldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB7Y29udGVudFZhbHVlOiBkYXRhVVJMfSwgdGhpcy5wcm9wcy5mbG93S2V5LHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb2JqRGF0YTogYW55O1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHN0YXRlLm9iamVjdERhdGEgJiYgc3RhdGUub2JqZWN0RGF0YSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iakRhdGEgPSBzdGF0ZS5vYmplY3REYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqRGF0YSA9IHN0YXRlLm9iamVjdERhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFvYmpEYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYobW9kZWwub2JqZWN0RGF0YSAmJiBtb2RlbC5vYmplY3REYXRhIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iakRhdGEgPSBtb2RlbC5vYmplY3REYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqRGF0YSA9IG1vZGVsLm9iamVjdERhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iakRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXM/LmZpbGVOYW1lRmllbGQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXM/LmZpbGVOYW1lRmllbGQsZm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iakRhdGEucHJvcGVydGllcyxtb2RlbC5hdHRyaWJ1dGVzPy5leHRlbnNpb25GaWVsZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmpEYXRhLnByb3BlcnRpZXMsbW9kZWwuYXR0cmlidXRlcz8uZXh0ZW5zaW9uRmllbGQsZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvYmpEYXRhLnByb3BlcnRpZXMsbW9kZWwuYXR0cmlidXRlcz8ubWltZVR5cGVGaWVsZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmpEYXRhLnByb3BlcnRpZXMsbW9kZWwuYXR0cmlidXRlcz8ubWltZVR5cGVGaWVsZCx0eXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iakRhdGEucHJvcGVydGllcyxtb2RlbC5hdHRyaWJ1dGVzPy5zaXplRmllbGQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXM/LnNpemVGaWVsZCxzaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvYmpEYXRhLnByb3BlcnRpZXMsbW9kZWwuYXR0cmlidXRlcz8uZGF0YUZpZWxkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iakRhdGEucHJvcGVydGllcyxtb2RlbC5hdHRyaWJ1dGVzPy5kYXRhRmllbGQsZGF0YVVSTCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vb2JqZWN0RGF0YS5pc1NlbGVjdGVkPXRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFueXdoby5zdGF0ZS5zZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwge29iamVjdERhdGE6IFtvYmpEYXRhXX0sIHRoaXMucHJvcHMuZmxvd0tleSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChtb2RlbC5hdHRyaWJ1dGVzPy5vblNlbGVjdGVkICYmIG1vZGVsLmF0dHJpYnV0ZXMub25TZWxlY3RlZC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkVmFsdWU6IHN0cmluZyA9IG1vZGVsLmF0dHJpYnV0ZXMub25TZWxlY3RlZDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb3V0Y29tZXM6IGFueSA9IG1hbnl3aG8ubW9kZWwuZ2V0T3V0Y29tZXModGhpcy5wcm9wcy5pZCx0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjbG9zZU91dGNvbWU6IGFueSA9IG91dGNvbWVzLmZpbmQoKG91dGNvbWU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0Y29tZS5kZXZlbG9wZXJOYW1lID09PSBzZWxlY3RlZFZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY2xvc2VPdXRjb21lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG1hbnl3aG8uY29tcG9uZW50Lm9uT3V0Y29tZShjbG9zZU91dGNvbWUsIG51bGwsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYW55d2hvLmNvbXBvbmVudC5oYW5kbGVFdmVudCh0aGlzLCBtb2RlbCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtYW55d2hvLmNvbXBvbmVudC5oYW5kbGVFdmVudCh0aGlzLCBtb2RlbCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaWxlU2VsZWN0ZWQoZTogYW55KSB7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmZpbGVJbnB1dC52YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxldCBtb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGU6IEZpbGUgPSB0aGlzLmZpbGVJbnB1dC5maWxlc1swXTtcclxuICAgICAgICAgICAgbGV0IGRhdGFVUkw6IHN0cmluZyA9IGF3YWl0IHRoaXMuZmlsZVJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZuYW1lOiBzdHJpbmcgPSBmaWxlLm5hbWUubGFzdEluZGV4T2YoJy4nKSA+PSAwID8gZmlsZS5uYW1lLnN1YnN0cmluZygwLCBmaWxlLm5hbWUubGFzdEluZGV4T2YoJy4nKSkgOiBmaWxlLm5hbWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4dDogc3RyaW5nID0gZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJykgPj0gMCA/IGZpbGUubmFtZS5zdWJzdHJpbmcoZmlsZS5uYW1lLmxhc3RJbmRleE9mKCcuJykgKyAxKS50b0xvd2VyQ2FzZSgpIDogJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cDogc3RyaW5nID0gZmlsZS50eXBlO1xyXG4gICAgICAgICAgICBjb25zdCBzaXplOiBudW1iZXIgPSBmaWxlLnNpemU7XHJcblxyXG4gICAgICAgICAgICBsZXQgbWF4U2l6ZTogbnVtYmVyID0gcGFyc2VJbnQobW9kZWwuYXR0cmlidXRlc1tcIm1heFNpemVLQlwiXSB8fCAwKTtcclxuICAgICAgICAgICAgaWYobWF4U2l6ZT4wICYmIHNpemU+KG1heFNpemUgKiAxMDAwKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VCb3guc2hvd0RpYWxvZyhcclxuICAgICAgICAgICAgICAgICAgICBcIkZpbGUgVG9vIExhcmdlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgKDxzcGFuPlRoZSBmaWxlIHlvdSBoYXZlIGNob3NlbiBpcyB7IHNpemUgfSBieXRlcyBsb25nIGFuZCBleGNlZWRzIHRoZSBtYXhpbXVtIGZpbGUgc2l6ZSBvZiB7IG1heFNpemUgfTwvc3Bhbj4pLFxyXG4gICAgICAgICAgICAgICAgICAgIFtuZXcgbW9kYWxEaWFsb2dCdXR0b24oXCJPa1wiLHRoaXMubWVzc2FnZUJveC5oaWRlRGlhbG9nKV1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNJbWFnZSh0eXApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltZ1NpemU6IG51bWJlciA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KG1vZGVsLmF0dHJpYnV0ZXNbJ2ltYWdlU2l6ZSddIHx8ICcwJykgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NpemUgPSBwYXJzZUludChtb2RlbC5hdHRyaWJ1dGVzWydpbWFnZVNpemUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGltZ1NpemUgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFVUkwgPSBhd2FpdCB0aGlzLlJlc2l6ZUJhc2U2NEltZyhkYXRhVVJMLCBpbWdTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG5ld1N0YXRlIDogYW55ID0ge307XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kZWwuY29udGVudFR5cGUgPT09ICdDb250ZW50U3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHtjb250ZW50VmFsdWU6IGRhdGFVUkx9LCB0aGlzLnByb3BzLmZsb3dLZXksdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3RhdGUgPSBtYW55d2hvLnN0YXRlLmdldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvYmpEYXRhOiBhbnk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc3RhdGUub2JqZWN0RGF0YSAmJiBzdGF0ZS5vYmplY3REYXRhIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqRGF0YSA9IHN0YXRlLm9iamVjdERhdGFbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpEYXRhID0gc3RhdGUub2JqZWN0RGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIW9iakRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihtb2RlbC5vYmplY3REYXRhICYmIG1vZGVsLm9iamVjdERhdGEgaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqRGF0YSA9IG1vZGVsLm9iamVjdERhdGFbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmpEYXRhID0gbW9kZWwub2JqZWN0RGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYob2JqRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvYmpEYXRhLnByb3BlcnRpZXMsbW9kZWwuYXR0cmlidXRlcz8uZmlsZU5hbWVGaWVsZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmpEYXRhLnByb3BlcnRpZXMsbW9kZWwuYXR0cmlidXRlcz8uZmlsZU5hbWVGaWVsZCxmbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXM/LmV4dGVuc2lvbkZpZWxkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iakRhdGEucHJvcGVydGllcyxtb2RlbC5hdHRyaWJ1dGVzPy5leHRlbnNpb25GaWVsZCxleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iakRhdGEucHJvcGVydGllcyxtb2RlbC5hdHRyaWJ1dGVzPy5taW1lVHlwZUZpZWxkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbnl3aG8udXRpbHMuc2V0T2JqZWN0RGF0YVByb3BlcnR5KG9iakRhdGEucHJvcGVydGllcyxtb2RlbC5hdHRyaWJ1dGVzPy5taW1lVHlwZUZpZWxkLHR5cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXM/LnNpemVGaWVsZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW55d2hvLnV0aWxzLnNldE9iamVjdERhdGFQcm9wZXJ0eShvYmpEYXRhLnByb3BlcnRpZXMsbW9kZWwuYXR0cmlidXRlcz8uc2l6ZUZpZWxkLHNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iakRhdGEucHJvcGVydGllcyxtb2RlbC5hdHRyaWJ1dGVzPy5kYXRhRmllbGQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFueXdoby51dGlscy5zZXRPYmplY3REYXRhUHJvcGVydHkob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXM/LmRhdGFGaWVsZCxkYXRhVVJMKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9vYmplY3REYXRhLmlzU2VsZWN0ZWQ9dHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBtYW55d2hvLnN0YXRlLnNldENvbXBvbmVudCh0aGlzLnByb3BzLmlkLCB7b2JqZWN0RGF0YTogW29iakRhdGFdfSwgdGhpcy5wcm9wcy5mbG93S2V5LHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGVsLmF0dHJpYnV0ZXM/Lm9uU2VsZWN0ZWQgJiYgbW9kZWwuYXR0cmlidXRlcy5vblNlbGVjdGVkLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRWYWx1ZTogc3RyaW5nID0gbW9kZWwuYXR0cmlidXRlcy5vblNlbGVjdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvdXRjb21lczogYW55ID0gbWFueXdoby5tb2RlbC5nZXRPdXRjb21lcyh0aGlzLnByb3BzLmlkLHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNsb3NlT3V0Y29tZTogYW55ID0gb3V0Y29tZXMuZmluZCgob3V0Y29tZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRjb21lLmRldmVsb3Blck5hbWUgPT09IHNlbGVjdGVkVmFsdWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjbG9zZU91dGNvbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWFueXdoby5jb21wb25lbnQub25PdXRjb21lKGNsb3NlT3V0Y29tZSwgbnVsbCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hbnl3aG8uY29tcG9uZW50LmhhbmRsZUV2ZW50KHRoaXMsIG1vZGVsLCB0aGlzLnByb3BzLmZsb3dLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbnl3aG8uY29tcG9uZW50LmhhbmRsZUV2ZW50KHRoaXMsIG1vZGVsLCB0aGlzLnByb3BzLmZsb3dLZXksKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckZpbGUodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbGVSZWFkQXNEYXRhVVJMKGZpbGU6IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWFkZXIuYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRE9NRXhjZXB0aW9uKCdQcm9ibGVtIHJlYWRpbmcgZmlsZScpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIFJlc2l6ZUJhc2U2NEltZyhiYXNlNjQ6IHN0cmluZywgd2lkdGg6IG51bWJlcik6IFByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhc3BlY3RSYXRpbyA9IGltZy5oZWlnaHQgLyBpbWcud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB3aWR0aCAqIGFzcGVjdFJhdGlvO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWR1Y3Rpb25GYWN0b3IgPSB3aWR0aCAvIGltZy53aWR0aDtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuc2NhbGUoY2FudmFzLndpZHRoIC8gaW1nLndpZHRoICwgY2FudmFzLmhlaWdodCAvIGltZy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltZywgMCAsIDApO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzaXplZCA9IGNhbnZhcy50b0RhdGFVUkwoKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzaXplZCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGltZy5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBET01FeGNlcHRpb24oJ1Byb2JsZW0gbG9hZGluZyBpbWFnZSBmaWxlJykpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBpbWcuc3JjID0gYmFzZTY0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcigpIHtcclxuXHJcbiAgICAgICAgbGV0IG1vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuXHJcbiAgICAgICAgc3dpdGNoKHRoaXMubW9kZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZGVmYXVsdFwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFJlbmRlcigpO1xyXG4gICAgICAgICAgICBjYXNlIFwiYmFzaWNcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJhc2ljUmVuZGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGJhc2ljUmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBhbGxvd2VkOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuZmlsZVR5cGVzLmZvckVhY2goKHR5cGU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICBpZihhbGxvd2VkLmxlbmd0aD4wKXtcclxuICAgICAgICAgICAgICAgIGFsbG93ZWQgKz0gXCIsXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZighdHlwZS5zdGFydHNXaXRoKFwiLlwiKSkge1xyXG4gICAgICAgICAgICAgICAgYWxsb3dlZCs9XCIuXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYWxsb3dlZCs9dHlwZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHN0eWxlOiBDU1NQcm9wZXJ0aWVzID0ge307XHJcbiAgICAgICAgbGV0IG1vZGVsID0gbWFueXdoby5tb2RlbC5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuXHJcbiAgICAgICAgaWYobW9kZWwuaXNWaXNpYmxlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBzdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG1vZGVsLndpZHRoKSB7XHJcbiAgICAgICAgICAgIHN0eWxlLndpZHRoPW1vZGVsLndpZHRoICsgXCJweFwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG1vZGVsLmhlaWdodCkge1xyXG4gICAgICAgICAgICBzdHlsZS5oZWlnaHQ9bW9kZWwuaGVpZ2h0ICsgXCJweFwiXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgY2xlYXJCdXR0b246IGFueTtcclxuICAgICAgICBpZih0aGlzLnN0YXRlLmZpbGUpIHtcclxuICAgICAgICAgICAgY2xlYXJCdXR0b24gPSAoXHJcbiAgICAgICAgICAgICAgICA8c3BhblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlLWNpcmNsZSBmaWxlLXBpY2tlci1jbGVhclwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KGU6IGFueSkgPT4ge3RoaXMuY2xlYXJGaWxlKHRydWUpfX1cclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkNsZWFyIGZpbGUgc2VsZWN0aW9uXCJcclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBzdHlsZT17c3R5bGV9XHJcbiAgICAgICAgICAgICAgICBpZD17dGhpcy5wcm9wcy5pZH1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLmNob29zZUZpbGV9XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmlsZS1waWNrZXItYnV0dG9uXCJcclxuICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICBDaG9vc2UgZmlsZVxyXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmaWxlLXBpY2tlci1maWxlbmFtZVwiXHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuZmlsZT8ubmFtZX1cclxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIHtjbGVhckJ1dHRvbn1cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBkZWZhdWx0UmVuZGVyKCkge1xyXG4gICAgICAgIGxldCBtb2RlbCA9IG1hbnl3aG8ubW9kZWwuZ2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHRoaXMucHJvcHMuZmxvd0tleSk7XHJcbiAgICAgICAgbGV0IHN0YXRlID0gbWFueXdoby5zdGF0ZS5nZXRDb21wb25lbnQodGhpcy5wcm9wcy5pZCwgdGhpcy5wcm9wcy5mbG93S2V5KTtcclxuXHJcbiAgICAgICAgbGV0IGNvbXBvbmVudENsYXNzOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIGxldCBoZWFkZXJDbGFzczogc3RyaW5nID0gXCJcIjtcclxuICAgICAgICBsZXQgdGl0bGU6IHN0cmluZyA9IG1vZGVsLmF0dHJpYnV0ZXM/LnRpdGxlIHx8ICdTZWxlY3QgRmlsZSc7XHJcblxyXG4gICAgICAgIGlmKG1vZGVsLmF0dHJpYnV0ZXM/LnRyYW5zcGFyZW50Py50b0xvd2VyQ2FzZSgpID09PSBcInRydWVcIil7XHJcbiAgICAgICAgICAgIGNvbXBvbmVudENsYXNzID0gXCJmaWxlLXBpY2tlci10cmFuc3BhcmVudCBcIiArIG1vZGVsLmF0dHJpYnV0ZXM/LmNsYXNzZXM7XHJcbiAgICAgICAgICAgIGhlYWRlckNsYXNzID0gXCJmaWxlLXBpY2tlci1oZWFkZXItdHJhbnNwYXJlbnQgXCI7XHJcbiAgICAgICAgICAgIHRpdGxlPVwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb21wb25lbnRDbGFzcyA9IFwiZmlsZS1waWNrZXIgXCIgKyBtb2RlbC5hdHRyaWJ1dGVzPy5jbGFzc2VzO1xyXG4gICAgICAgICAgICBoZWFkZXJDbGFzcyA9IFwiZmlsZS1waWNrZXItaGVhZGVyIFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBsZXQgc3R5bGU6IENTU1Byb3BlcnRpZXMgPSB7fTtcclxuICAgICAgICBzdHlsZS53aWR0aD1cIi13ZWJraXQtZmlsbC1hdmFpbGFibGVcIjtcclxuICAgICAgICBzdHlsZS5oZWlnaHQ9XCItd2Via2l0LWZpbGwtYXZhaWxhYmxlXCI7XHJcblxyXG4gICAgICAgIGlmKG1vZGVsLmlzVmlzaWJsZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihtb2RlbC53aWR0aCkge1xyXG4gICAgICAgICAgICBzdHlsZS53aWR0aD1tb2RlbC53aWR0aCArIFwicHhcIlxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihtb2RlbC5oZWlnaHQpIHtcclxuICAgICAgICAgICAgc3R5bGUuaGVpZ2h0PW1vZGVsLmhlaWdodCArIFwicHhcIlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZpbGVQaWNrOiBhbnk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGNsZWFyQnV0dG9uOiBhbnk7XHJcbiAgICAgICAgZmlsZVBpY2sgPSB0aGlzLnBpY2tGaWxlO1xyXG4gICAgICAgIGNsZWFyQnV0dG9uID0gKFxyXG4gICAgICAgICAgICA8c3BhbiBcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlIGZpbGUtcGlja2VyLWhlYWRlci1idXR0b25cIiBcclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlOiBhbnkpID0+IHt0aGlzLmNsZWFyRmlsZSh0cnVlKX19XHJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIkNsZWFyIHNlbGVjdGVkIGZpbGVcIlxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIGxldCBmaWxlOiBhbnk7XHJcbiAgICAgICAgbGV0IG1pbWVUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IGZpbGVDb250ZW50OiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IGZpbGVOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IGV4dGVuc2lvbjogc3RyaW5nO1xyXG4gICAgICAgIGxldCBjb250ZW50OiBhbnk7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKG1vZGVsLmNvbnRlbnRUeXBlID09PSBcIkNvbnRlbnRTdHJpbmdcIikge1xyXG4gICAgICAgICAgICBmaWxlQ29udGVudD1zdGF0ZS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgb2JqRGF0YTogYW55O1xyXG4gICAgICAgICAgICBpZihzdGF0ZSAmJiBzdGF0ZS5vYmplY3REYXRhKXtcclxuICAgICAgICAgICAgICAgIGlmKHN0YXRlLm9iamVjdERhdGEgaW5zdGFuY2VvZiBBcnJheSl7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqRGF0YT1zdGF0ZS5vYmplY3REYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqRGF0YT1zdGF0ZS5vYmplY3REYXRhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIW9iakRhdGEpe1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYobW9kZWwub2JqZWN0RGF0YSAmJiBtb2RlbC5vYmplY3REYXRhIGluc3RhbmNlb2YgQXJyYXkpe1xyXG4gICAgICAgICAgICAgICAgICAgIG9iakRhdGE9bW9kZWwub2JqZWN0RGF0YVswXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iakRhdGE9bW9kZWwub2JqZWN0RGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKG9iakRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIG1hbnl3aG8uc3RhdGUuc2V0Q29tcG9uZW50KHRoaXMucHJvcHMuaWQsIHtvYmplY3REYXRhOiBbb2JqRGF0YV19LCB0aGlzLnByb3BzLmZsb3dLZXksdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKG9iakRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGZpbGVOYW1lID0gbWFueXdoby51dGlscy5nZXRPYmplY3REYXRhUHJvcGVydHkob2JqRGF0YS5wcm9wZXJ0aWVzLG1vZGVsLmF0dHJpYnV0ZXNbXCJmaWxlTmFtZUZpZWxkXCJdKT8uY29udGVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQgPSBtYW55d2hvLnV0aWxzLmdldE9iamVjdERhdGFQcm9wZXJ0eShvYmpEYXRhLnByb3BlcnRpZXMsbW9kZWwuYXR0cmlidXRlc1tcImRhdGFGaWVsZFwiXSk/LmNvbnRlbnRWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvL2ZpbGUgPSB0aGlzLmdldFN0YXRlVmFsdWUoKSBhcyBGbG93T2JqZWN0RGF0YTtcclxuXHJcbiAgICAgICAgaWYgKGZpbGVDb250ZW50KSB7XHJcbiAgICAgICAgICAgIG1pbWVUeXBlID0gZmlsZUNvbnRlbnQuc3Vic3RyaW5nKGZpbGVDb250ZW50LmluZGV4T2YoJzonKSArIDEsIGZpbGVDb250ZW50LmluZGV4T2YoJzsnKSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbWFnZShtaW1lVHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAoXHJcbiAgICAgICAgICAgICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAnMTAwJScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICdhdXRvJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9PYmplY3RGaXQ6ICdjb3ZlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZj17KGVsZW1lbnQ6IEhUTUxJbWFnZUVsZW1lbnQpID0+IHt0aGlzLmltZyA9IGVsZW1lbnQ7IH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpbGUtcGlja2VyLWltYWdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtmaWxlQ29udGVudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Mb2FkPXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzY2FsZUltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmlsZS1waWNrZXItZmlsZS1uYW1lXCJcclxuICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtmaWxlTmFtZX1cclxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb250ZW50ID0gKFxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4RGlyZWN0aW9uOiBcImNvbHVtblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4R3JvdzogMVxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiBcImF1dG9cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpbGUtcGlja2VyLWZpbGUtbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogXCJhdXRvXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XCJObyBmaWxlIHNlbGVjdGVkXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpbGUtcGlja2VyLWZpbGUtbmFtZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17e21hcmdpbjogXCJhdXRvXCJ9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XCJDbGljayB0byBzZWxlY3QgYSBmaWxlXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIHRoaXMubGFzdENvbnRlbnQgPSAoXHJcbiAgICAgICAgICAgICAgICA8ZGl2IFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y29tcG9uZW50Q2xhc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3N0eWxlfVxyXG4gICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxEaWFsb2dCb3hcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXsoZWxlbWVudDogRGlhbG9nQm94KSA9PiB7dGhpcy5tZXNzYWdlQm94ID0gZWxlbWVudH19XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17aGVhZGVyQ2xhc3N9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbGUtcGlja2VyLWhlYWRlci1sZWZ0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmaWxlLXBpY2tlci1oZWFkZXItdGl0bGVcIj57dGl0bGV9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWxlLXBpY2tlci1oZWFkZXItcmlnaHRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjbGVhckJ1dHRvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmlsZS1waWNrZXItYm9keVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2ZpbGVQaWNrfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWY9eyhlbGVtZW50OiBhbnkpID0+IHt0aGlzLmltZ0RpdiA9IGVsZW1lbnQ7IH19XHJcbiAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7Y29udGVudH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWY9eyhlbGU6IGFueSkgPT4ge3RoaXMuZmlsZUlucHV0ID0gZWxlOyB9fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmlsZS1maWxlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmZpbGVTZWxlY3RlZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0Q29udGVudDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm1hbnl3aG8uY29tcG9uZW50LnJlZ2lzdGVyKCdGaWxlUGlja2VyJywgRmlsZVBpY2tlcik7XHJcblxyXG4iLCJleHBvcnQgKiBmcm9tICcuL0ZpbGVQaWNrZXInOyIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MjkpO1xuIl0sIm5hbWVzIjpbInByb3BzIiwiZHJhZ0V2ZW50IiwiRHJhZ0V2ZW50IiwiZGlhbG9nVmlzaWJsZSIsImRpYWxvZ1RpdGxlIiwiZGlhbG9nQnV0dG9ucyIsImRpYWxvZ09uQ2xvc2UiLCJoaWRlRGlhbG9nIiwidG9wIiwibGVmdCIsImhhbmRsZUtleVVwIiwiYmluZCIsImhhbmRsZU91dHNpZGVDbGljayIsInNob3dEaWFsb2ciLCJzZXREaWFsb2ciLCJkaWFsb2ciLCJ0aGlzIiwicGFyZW50WENlbnRlciIsIm9mZnNldFBhcmVudCIsImNsaWVudFdpZHRoIiwicGFyZW50WUNlbnRlciIsImNsaWVudEhlaWdodCIsImRpYWxvZ1hPZmZzZXQiLCJkaWFsb2dZT2Zmc2V0IiwiY2xhc3NMaXN0IiwiYWRkIiwicG9zaXRpb25EaWFsb2ciLCJzdHlsZSIsInN0b3BFdmVudEJ1YmJsZSIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsImNhbmNlbEJ1YmJsZSIsInJldHVyblZhbHVlIiwiY29tcG9uZW50RGlkTW91bnQiLCJmb3JjZVVwZGF0ZSIsInRpdGxlIiwiY29udGVudCIsImJ1dHRvbnMiLCJvbkNsb3NlIiwiZGlhbG9nQ29udGVudCIsInVuZGVmaW5lZCIsImtleXMiLCJrZXlDb2RlIiwiY29udGFpbnMiLCJ0YXJnZXQiLCJyZW5kZXIiLCJidXR0b24iLCJwdXNoIiwiY2xhc3NOYW1lIiwib25Nb3VzZURvd24iLCJoYW5kbGVyIiwibGFiZWwiLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VVcCIsIm9uQ29udGV4dE1lbnUiLCJyZWYiLCJub2RlIiwiZGlzcGxheSIsImZsZXhEaXJlY3Rpb24iLCJmbGV4R3JvdyIsIm1hcmdpbkxlZnQiLCJtb3ZlTWUiLCJjbGllbnRSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibW91c2VPZmZzZXRZIiwiY2xpZW50WSIsInN0YXJ0IiwiZURyYWdFdmVudFR5cGUiLCJjbGllbnRYIiwidHlwZSIsIm1vdXNlT2Zmc2V0WCIsImVuZCIsIlJlYWN0IiwiQ29tcG9uZW50IiwiRGlhbG9nQm94IiwibW9kYWxEaWFsb2dCdXR0b24iLCJ1bmtub3duIiwic291cmNlRWxlbWVudCIsInRhcmdldEVsZW1lbnQiLCJtb3VzZVgiLCJtb3VzZVkiLCJldnQiLCJkcmFnIiwibWFueXdobyIsImV2ZW50TWFuYWdlciIsImJlZm9yZVNlbmRMaXN0ZW5lcnMiLCJkb25lTGlzdGVuZXJzIiwiaW5pdGlhbGl6ZWRMaXN0ZW5lcnMiLCJqb2luTGlzdGVuZXJzIiwiZmFpbExpc3RlbmVycyIsIm91dGNvbWVCZWluZ1RyaWdnZXJlZCIsImhpc3RvcnkiLCJiZWZvcmVTZW5kIiwieGhyIiwicmVxdWVzdCIsImtleSIsIndpbmRvdyIsImhhc093blByb3BlcnR5IiwiY3VsdHVyZSIsImxlbmd0aCIsInNldFJlcXVlc3RIZWFkZXIiLCJqb2luIiwiZG9uZSIsImluaXRpYWxpemVkIiwiZmFpbCIsImFkZEJlZm9yZVNlbmRMaXN0ZW5lciIsImNvbXBvbmVudElkIiwicmVtb3ZlQmVmb3JlU2VuZExpc3RlbmVyIiwiYWRkSW5pdGlhbGl6ZWRMaXN0ZW5lciIsInJlbW92ZUluaXRpYWxpemVkTGlzdGVuZXIiLCJhZGRKb2luTGlzdGVuZXIiLCJyZW1vdmVKb2luTGlzdGVuZXIiLCJhZGREb25lTGlzdGVuZXIiLCJyZW1vdmVEb25lTGlzdGVuZXIiLCJhZGRGYWlsTGlzdGVuZXIiLCJyZW1vdmVGYWlsTGlzdGVuZXIiLCJzZXR0aW5ncyIsImluaXRpYWxpemUiLCJpbnZva2UiLCJpbml0aWFsaXphdGlvbiIsInNlbGVjdGVkSXRlbSIsInRleHQiLCJsYXN0Q29udGVudCIsImZpbGVTZWxlY3RlZCIsImZpbGVSZWFkQXNEYXRhVVJMIiwiUmVzaXplQmFzZTY0SW1nIiwiY2xlYXJGaWxlIiwicGlja0ZpbGUiLCJjaG9vc2VGaWxlIiwiaXNJbWFnZSIsInJlc2NhbGVJbWFnZSIsImZsb3dNb3ZlZCIsIm1vZGVsIiwiZ2V0Q29tcG9uZW50IiwiaWQiLCJmbG93S2V5IiwibW9kZSIsImF0dHJpYnV0ZXMiLCJmaWxlVHlwZXMiLCJhbGxvd2VkIiwic3BsaXQiLCJzdGF0ZSIsImltZ0RhdGEiLCJmaWxlIiwiaW52b2tlVHlwZSIsInByZXNlcnZlU3RhdGUiLCJuZXdTdGF0ZSIsImNvbnRlbnRUeXBlIiwiY29udGVudFZhbHVlIiwib2JqZWN0RGF0YSIsInNldENvbXBvbmVudCIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiaW1nIiwid2lkdGgiLCJoZWlnaHQiLCJub3RpZnkiLCJjb25zb2xlIiwibG9nIiwic2V0U3RhdGUiLCJvYmpEYXRhIiwiQXJyYXkiLCJ1dGlscyIsInNldE9iamVjdERhdGFQcm9wZXJ0eSIsInByb3BlcnRpZXMiLCJmaWxlTmFtZUZpZWxkIiwiZXh0ZW5zaW9uRmllbGQiLCJtaW1lVHlwZUZpZWxkIiwic2l6ZUZpZWxkIiwiZGF0YUZpZWxkIiwiaXNTZWxlY3RlZCIsIm9uQ2xlYXJlZCIsIm91dGNvbWVzIiwiZ2V0T3V0Y29tZXMiLCJjbG9zZU91dGNvbWUiLCJmaW5kIiwib3V0Y29tZSIsImRldmVsb3Blck5hbWUiLCJjb21wb25lbnQiLCJvbk91dGNvbWUiLCJoYW5kbGVFdmVudCIsImZpbGVJbnB1dCIsInZhbHVlIiwiY2xpY2siLCJtaW1lVHlwZSIsInBpY2tlck9wdHMiLCJ0eXBlcyIsImV4Y2x1ZGVBY2NlcHRBbGxPcHRpb24iLCJtdWx0aXBsZSIsImV4dGVuc2lvbnMiLCJmb3JFYWNoIiwidHJpbSIsInRvTG93ZXJDYXNlIiwiZGVzY3JpcHRpb24iLCJhY2NlcHQiLCJzaG93T3BlbkZpbGVQaWNrZXIiLCJoYW5kbGUiLCJraW5kIiwiZ2V0RmlsZSIsImRhdGEiLCJpbWFnZURhdGEiLCJmaWxlQ2hvc2VuIiwibmFtZSIsImZuYW1lIiwibGFzdEluZGV4T2YiLCJzdWJzdHJpbmciLCJleHQiLCJ0eXAiLCJzaXplIiwiZGF0YVVSTCIsIm1heFNpemUiLCJwYXJzZUludCIsIm1lc3NhZ2VCb3giLCJpbWdTaXplIiwib25TZWxlY3RlZCIsImZpbGVzIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwib25lcnJvciIsImFib3J0IiwiRE9NRXhjZXB0aW9uIiwib25sb2FkIiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsImJhc2U2NCIsIkltYWdlIiwiYXNwZWN0UmF0aW8iLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsInNjYWxlIiwiZHJhd0ltYWdlIiwicmVzaXplZCIsInRvRGF0YVVSTCIsInNyYyIsImRlZmF1bHRSZW5kZXIiLCJiYXNpY1JlbmRlciIsInN0YXJ0c1dpdGgiLCJjbGVhckJ1dHRvbiIsImlzVmlzaWJsZSIsIm9uQ2xpY2siLCJjb21wb25lbnRDbGFzcyIsImhlYWRlckNsYXNzIiwidHJhbnNwYXJlbnQiLCJjbGFzc2VzIiwiZmlsZVBpY2siLCJmaWxlQ29udGVudCIsImZpbGVOYW1lIiwiZ2V0T2JqZWN0RGF0YVByb3BlcnR5IiwiaW5kZXhPZiIsIm1heEhlaWdodCIsIm1heFdpZHRoIiwiT09iamVjdEZpdCIsImVsZW1lbnQiLCJvbkxvYWQiLCJtYXJnaW4iLCJpbWdEaXYiLCJlbGUiLCJvbkNoYW5nZSIsInJlZ2lzdGVyIiwiRmlsZVBpY2tlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=